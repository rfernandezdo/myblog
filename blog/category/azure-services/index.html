<!DOCTYPE html><html class=no-js lang=en> <head><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="A blog about Azure, DevOps and other stuff" name=description><meta content="Rafael FernÃ¡ndez" name=author><link href=https://rfernandezdo.github.io/blog/category/azure-services/ rel=canonical><link href=../azure-frameworks/ rel=prev><link href=../azure-updates/ rel=next><link href=../../../feed_rss_created.xml rel=alternate title="RSS feed" type=application/rss+xml><link href=../../../feed_rss_updated.xml rel=alternate title="RSS feed of updated content" type=application/rss+xml><link href=../../../assets/images/favicon.png rel=icon><meta content="mkdocs-1.5.3, mkdocs-material-9.5.17" name=generator><title>Azure Services - Un Rinconcito donde contar lo que quiera</title><link href=../../../assets/stylesheets/main.bcfcd587.min.css rel=stylesheet><link href=../../../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><link crossorigin href=https://fonts.gstatic.com rel=preconnect><link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback" rel=stylesheet><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta content=website property=og:type><meta content="Azure Services - Un Rinconcito donde contar lo que quiera" property=og:title><meta content="A blog about Azure, DevOps and other stuff" property=og:description><meta content=https://rfernandezdo.github.io/assets/images/social/blog/category/azure-services.png property=og:image><meta content=image/png property=og:image:type><meta content=1200 property=og:image:width><meta content=630 property=og:image:height><meta content=https://rfernandezdo.github.io/blog/category/azure-services/ property=og:url><meta content=summary_large_image name=twitter:card><meta content="Azure Services - Un Rinconcito donde contar lo que quiera" name=twitter:title><meta content="A blog about Azure, DevOps and other stuff" name=twitter:description><meta content=https://rfernandezdo.github.io/assets/images/social/blog/category/azure-services.png name=twitter:image> <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head> <body data-md-color-accent=blue data-md-color-primary=blue data-md-color-scheme=default dir=ltr> <input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox> <input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a class=md-skip href=#azure-services> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav aria-label=Header class="md-header__inner md-grid"> <a aria-label="Un Rinconcito donde contar lo que quiera" class="md-header__button md-logo" data-md-component=logo href=../../.. title="Un Rinconcito donde contar lo que quiera"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Un Rinconcito donde contar lo que quiera </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Azure Services </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input aria-label="Switch to dark mode" class=md-option data-md-color-accent=blue data-md-color-media data-md-color-primary=blue data-md-color-scheme=default id=__palette_0 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_1 hidden title="Switch to dark mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> <input aria-label="Switch to light mode" class=md-option data-md-color-accent=blue data-md-color-media data-md-color-primary=black data-md-color-scheme=slate id=__palette_1 name=__palette type=radio> <label class="md-header__button md-icon" for=__palette_0 hidden title="Switch to light mode"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"></path></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <div class=md-header__option> <div class=md-select> <button aria-label="Select language" class="md-header__button md-icon"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"></path></svg> </button> <div class=md-select__inner> <ul class=md-select__list> <li class=md-select__item> <a class=md-select__link href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&_x_tr_tl=es&_x_tr_hl=es&_x_tr_pto=wapp" hreflang=en> English </a> </li> <li class=md-select__item> <a class=md-select__link href="https://rfernandezdo-github-io.translate.goog/?_x_tr_sl=auto&_x_tr_tl=en&_x_tr_hl=en&_x_tr_pto=wapp" hreflang=es> Spanish </a> </li> </ul> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text> <label class="md-search__icon md-icon" for=__search> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg> </label> <nav aria-label=Search class=md-search__options> <button aria-label=Clear class="md-search__icon md-icon" tabindex=-1 title=Clear type=reset> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> </nav> <nav aria-label=Tabs class=md-tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=../../ class=md-tabs__link> Blog </a> </li> <li class=md-tabs__item> <a class=md-tabs__link href=../../..> About </a> </li> <li class=md-tabs__item> <a href=../../../contributions/ class=md-tabs__link> Contributions </a> </li> <li class=md-tabs__item> <a href=../../../Azure/Security/MCSB/Readme/ class=md-tabs__link> Azure </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav aria-label=Navigation class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" data-md-level=0> <label class=md-nav__title for=__drawer> <a aria-label="Un Rinconcito donde contar lo que quiera" class="md-nav__button md-logo" data-md-component=logo href=../../.. title="Un Rinconcito donde contar lo que quiera"> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg> </a> Un Rinconcito donde contar lo que quiera </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_1 type=checkbox> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Blog </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_1_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Blog </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Blog </span> </a> </li> <li class=md-nav__item> <a href=../../tags/ class=md-nav__link> <span class=md-ellipsis> Posts by Tags </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_1_3 type=checkbox> <label class=md-nav__link for=__nav_1_3 id=__nav_1_3_label tabindex> <span class=md-ellipsis> Archive </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_1_3_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_3> <span class="md-nav__icon md-icon"></span> Archive </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../2024/04/ class=md-nav__link> <span class=md-ellipsis> 2024/04 </span> </a> </li> <li class=md-nav__item> <a href=../../2024/03/ class=md-nav__link> <span class=md-ellipsis> 2024/03 </span> </a> </li> <li class=md-nav__item> <a href=../../2024/02/ class=md-nav__link> <span class=md-ellipsis> 2024/02 </span> </a> </li> <li class=md-nav__item> <a href=../../2023/12/ class=md-nav__link> <span class=md-ellipsis> 2023/12 </span> </a> </li> <li class=md-nav__item> <a href=../../2023/11/ class=md-nav__link> <span class=md-ellipsis> 2023/11 </span> </a> </li> <li class=md-nav__item> <a href=../../2023/10/ class=md-nav__link> <span class=md-ellipsis> 2023/10 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input checked class="md-nav__toggle md-toggle" id=__nav_1_4 type=checkbox> <label class=md-nav__link for=__nav_1_4 id=__nav_1_4_label tabindex> <span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=true aria-labelledby=__nav_1_4_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_1_4> <span class="md-nav__icon md-icon"></span> Categories </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../azure-frameworks/ class=md-nav__link> <span class=md-ellipsis> Azure Frameworks </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Azure Services </span> </a> </li> <li class=md-nav__item> <a href=../azure-updates/ class=md-nav__link> <span class=md-ellipsis> Azure Updates </span> </a> </li> <li class=md-nav__item> <a href=../devops/ class=md-nav__link> <span class=md-ellipsis> DevOps </span> </a> </li> <li class=md-nav__item> <a href=../development/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class=md-nav__item> <a href=../english/ class=md-nav__link> <span class=md-ellipsis> English </span> </a> </li> <li class=md-nav__item> <a href=../hello_world/ class=md-nav__link> <span class=md-ellipsis> Hello_World </span> </a> </li> <li class=md-nav__item> <a href=../learning/ class=md-nav__link> <span class=md-ellipsis> Learning </span> </a> </li> <li class=md-nav__item> <a href=../microsoft-365/ class=md-nav__link> <span class=md-ellipsis> Microsoft 365 </span> </a> </li> <li class=md-nav__item> <a href=../security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> <li class=md-nav__item> <a href=../windows/ class=md-nav__link> <span class=md-ellipsis> Windows </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a class=md-nav__link href=../../..> <span class=md-ellipsis> About </span> </a> </li> <li class=md-nav__item> <a href=../../../contributions/ class=md-nav__link> <span class=md-ellipsis> Contributions </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_4 type=checkbox> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Azure </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Azure </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_4_1 type=checkbox> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> Security </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_1_label class=md-nav data-md-level=2> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Security </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" id=__nav_4_1_1 type=checkbox> <label class=md-nav__link for=__nav_4_1_1 id=__nav_4_1_1_label tabindex=0> <span class=md-ellipsis> MCSB </span> <span class="md-nav__icon md-icon"></span> </label> <nav aria-expanded=false aria-labelledby=__nav_4_1_1_label class=md-nav data-md-level=3> <label class=md-nav__title for=__nav_4_1_1> <span class="md-nav__icon md-icon"></span> MCSB </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Readme/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Readme </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Asset%20Management/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Asset Management </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Backup%20and%20Recovery/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Backup and Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Data%20Protection/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Data Protection </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/DevOps%20Security/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - DevOps Security </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Endpoint%20Security/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Endpoint Security </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Governance%20and%20Strategy/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Governance and Strategy </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Identity%20Management/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Identity Management </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Incident%20Response/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Incident Response </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Logging%20and%20Threat%20Detection/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Logging and Threat Detection </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Network%20Security/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Network Security </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Posture%20and%20Vulnerability%20Mgmt/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Posture and Vulnerability Mgmt </span> </a> </li> <li class=md-nav__item> <a href=../../../Azure/Security/MCSB/Privileged%20Access/ class=md-nav__link> <span class=md-ellipsis> MCSB_v1 - Privileged Access </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <div class=md-content__inner> <header class=md-typeset> <h1 id=azure-services>Azure Services</h1> </header> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-24 00:00:00">April 24, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 4 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=how-to-create-a-management-group-diagram-with-drawio><a href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/ class=toclink>How to create a Management Group diagram with draw.io</a></h2> <p>I nedd to create a diagram of the Management Groups in Azure, and I remembered a project that did something similar but with PowerShell: https://github.com/PowerShellToday/new-mgmgroupdiagram.</p> <h3 id=export-your-management-group-structure-from-azure-portal-or-ask-for-it><a class=toclink href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/#export-your-management-group-structure-from-azure-portal-or-ask-for-it>Export your Management Group structure from Azure Portal or ask for it</a></h3> <p>If you can access the Azure Portal, you can export the Management Group structure to a CSV file. To do this, follow these steps:</p> <ol> <li>Go to the <strong>Azure portal</strong>.</li> <li>Navigate to <strong>Management groups</strong>.</li> <li>Click on <strong>Export</strong>.</li> <li>Save the CSV file to your local machine.</li> </ol> <p>If you don't have access to the Azure Portal, you can ask your Azure administrator to export the Management Group structure for you.</p> <p>The file has the following columns:</p> <ul> <li>id: The unique identifier of the Management Group or subscription.</li> <li>displayName: The name of the Management Group or subscription.</li> <li>itemType: The type of the item (Management Group or subscription).</li> <li>path: The path to the management or subscription group, its parent.</li> <li>accessLevel: Your access level.</li> <li>childSubscriptionCount: The number of child subscriptions at this level.</li> <li>totalSubscriptionCount: The total number of subscriptions.</li> </ul> <h3 id=create-a-csv-to-be-imported-into-drawio><a class=toclink href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/#create-a-csv-to-be-imported-into-drawio>Create a CSV to be imported into draw.io</a></h3> <ol> <li>Import the CSV file to excel, rename the sheet to "Export_Portal"</li> <li>Create a second sheet with the following columns:<ul> <li>id: reference to the id in the first sheet</li> <li>displayName: reference to the displayName in the first sheet</li> <li>itemType: reference to the itemType in the first sheet</li> <li>Parent: Use the following formula to get the parent of the current item: <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>=IF(ISERROR(FIND(","; Export_Portal!D2)); Export_Portal!D2; TRIM(RIGHT(SUBSTITUTE(Export_Portal!D2; ","; REPT(" "; LEN(Export_Portal!D2))); LEN(Export_Portal!D2))))
</span></code></pre></div></li> </ul> </li> <li>Export the second sheet to a CSV file.</li> </ol> <h3 id=import-the-csv-file-into-drawio><a class=toclink href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/#import-the-csv-file-into-drawio>Import the CSV file into draw.io</a></h3> <ol> <li>Go to <a href=https://app.diagrams.net/ >draw.io</a> and create a new diagram.</li> <li>Click on Arrange &gt; Insert &gt; Advanced &gt; CSV.</li> <li> <p>Insert the header for the columns: id, displayName, itemType, Parent:</p> <p><div class="language-text highlight"><pre><span></span><code><span id=__span-9-1><a href=#__codelineno-9-1 id=__codelineno-9-1 name=__codelineno-9-1></a>    #label: %displayName%
</span><span id=__span-9-2><a href=#__codelineno-9-2 id=__codelineno-9-2 name=__codelineno-9-2></a>    #stylename: itemType
</span><span id=__span-9-3><a href=#__codelineno-9-3 id=__codelineno-9-3 name=__codelineno-9-3></a>    #styles: {"Management Group": "label;image=img/lib/azure2/general/Management_Groups.svg;whiteSpace=wrap;html=1;rounded=1; fillColor=%fill%;strokeColor=#6c8ebf;fillColor=#dae8fc;points=[[0.5,0,0,0,0],[0.5,1,0,0,0]];",\
</span><span id=__span-9-4><a href=#__codelineno-9-4 id=__codelineno-9-4 name=__codelineno-9-4></a>    #"Subscription": "label;image=img/lib/azure2/general/Subscriptions.svg;whiteSpace=wrap;html=1;rounded=1; fillColor=%fill%;strokeColor=#d6b656;fillColor=#fff2cc;points=[[0.5,0,0,0,0],[0.5,1,0,0,0]];imageWidth=26;"}
</span><span id=__span-9-5><a href=#__codelineno-9-5 id=__codelineno-9-5 name=__codelineno-9-5></a>    #
</span><span id=__span-9-6><a href=#__codelineno-9-6 id=__codelineno-9-6 name=__codelineno-9-6></a>    #
</span><span id=__span-9-7><a href=#__codelineno-9-7 id=__codelineno-9-7 name=__codelineno-9-7></a>    #namespace: csvimport-
</span><span id=__span-9-8><a href=#__codelineno-9-8 id=__codelineno-9-8 name=__codelineno-9-8></a>    #
</span><span id=__span-9-9><a href=#__codelineno-9-9 id=__codelineno-9-9 name=__codelineno-9-9></a>    #connect: {"from": "ParentId", "to": "displayName", "invert": true, "style": "curved=1;endArrow=blockThin;endFill=1;fontSize=11;edgeStyle=orthogonalEdgeStyle;"}
</span><span id=__span-9-10><a href=#__codelineno-9-10 id=__codelineno-9-10 name=__codelineno-9-10></a>    #
</span><span id=__span-9-11><a href=#__codelineno-9-11 id=__codelineno-9-11 name=__codelineno-9-11></a>    ## Node width and height, and padding for autosize
</span><span id=__span-9-12><a href=#__codelineno-9-12 id=__codelineno-9-12 name=__codelineno-9-12></a>    #width: auto
</span><span id=__span-9-13><a href=#__codelineno-9-13 id=__codelineno-9-13 name=__codelineno-9-13></a>    #height: auto
</span><span id=__span-9-14><a href=#__codelineno-9-14 id=__codelineno-9-14 name=__codelineno-9-14></a>    #padding: -12
</span><span id=__span-9-15><a href=#__codelineno-9-15 id=__codelineno-9-15 name=__codelineno-9-15></a>    #
</span><span id=__span-9-16><a href=#__codelineno-9-16 id=__codelineno-9-16 name=__codelineno-9-16></a>    ## ignore: id,image,fill,stroke,refs,manager
</span><span id=__span-9-17><a href=#__codelineno-9-17 id=__codelineno-9-17 name=__codelineno-9-17></a>    #
</span><span id=__span-9-18><a href=#__codelineno-9-18 id=__codelineno-9-18 name=__codelineno-9-18></a>    ## Column to be renamed to link attribute (used as link).
</span><span id=__span-9-19><a href=#__codelineno-9-19 id=__codelineno-9-19 name=__codelineno-9-19></a>    ## link: url
</span><span id=__span-9-20><a href=#__codelineno-9-20 id=__codelineno-9-20 name=__codelineno-9-20></a>    #
</span><span id=__span-9-21><a href=#__codelineno-9-21 id=__codelineno-9-21 name=__codelineno-9-21></a>    ## Spacing between nodes, heirarchical levels and parallel connections.
</span><span id=__span-9-22><a href=#__codelineno-9-22 id=__codelineno-9-22 name=__codelineno-9-22></a>    #nodespacing: 40
</span><span id=__span-9-23><a href=#__codelineno-9-23 id=__codelineno-9-23 name=__codelineno-9-23></a>    #levelspacing: 100
</span><span id=__span-9-24><a href=#__codelineno-9-24 id=__codelineno-9-24 name=__codelineno-9-24></a>    #edgespacing: 40
</span><span id=__span-9-25><a href=#__codelineno-9-25 id=__codelineno-9-25 name=__codelineno-9-25></a>    #
</span><span id=__span-9-26><a href=#__codelineno-9-26 id=__codelineno-9-26 name=__codelineno-9-26></a>    ## layout: auto
</span><span id=__span-9-27><a href=#__codelineno-9-27 id=__codelineno-9-27 name=__codelineno-9-27></a>    #layout: verticaltree
</span><span id=__span-9-28><a href=#__codelineno-9-28 id=__codelineno-9-28 name=__codelineno-9-28></a>    #
</span><span id=__span-9-29><a href=#__codelineno-9-29 id=__codelineno-9-29 name=__codelineno-9-29></a>    ## ---- CSV below this line. First line are column names. ----
</span></code></pre></div> 4. Paste the content of the CSV file and click on Import.</p> </li> </ol> <p>You should see a diagram with the Management Groups and Subscriptions.</p> <p>For example:</p> <p>This is the common structure for the Management Groups in the Enterprise Scale Landing Zone, now Accelerator Landing Zone: </p> <pre class=mermaid><code>    graph TD
        A[Root Management Group] --&gt; B[Intermediary-Management-Group]
        B --&gt; C[Decommissioned]
        B --&gt; D[Landing Zones]
        B --&gt; E[Platform]
        B --&gt; F[Sandboxes]
        D --&gt; G[Corp]
        D --&gt; H[Online]
        E --&gt; I[Connectivity]
        E --&gt; J[Identity]
        E --&gt; K[Management]        </code></pre> <p>And this is the CSV file to import into draw.io:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-10-1><a href=#__codelineno-10-1 id=__codelineno-10-1 name=__codelineno-10-1></a>#label: %displayName%
</span><span id=__span-10-2><a href=#__codelineno-10-2 id=__codelineno-10-2 name=__codelineno-10-2></a>#stylename: itemType
</span><span id=__span-10-3><a href=#__codelineno-10-3 id=__codelineno-10-3 name=__codelineno-10-3></a>#styles: {"Management Group": "label;image=img/lib/azure2/general/Management_Groups.svg;whiteSpace=wrap;html=1;rounded=1; fillColor=%fill%;strokeColor=#6c8ebf;fillColor=#dae8fc;points=[[0.5,0,0,0,0],[0.5,1,0,0,0]];",\
</span><span id=__span-10-4><a href=#__codelineno-10-4 id=__codelineno-10-4 name=__codelineno-10-4></a>#"Subscription": "label;image=img/lib/azure2/general/Subscriptions.svg;whiteSpace=wrap;html=1;rounded=1; fillColor=%fill%;strokeColor=#d6b656;fillColor=#fff2cc;points=[[0.5,0,0,0,0],[0.5,1,0,0,0]];imageWidth=26;"}
</span><span id=__span-10-5><a href=#__codelineno-10-5 id=__codelineno-10-5 name=__codelineno-10-5></a>#
</span><span id=__span-10-6><a href=#__codelineno-10-6 id=__codelineno-10-6 name=__codelineno-10-6></a>#
</span><span id=__span-10-7><a href=#__codelineno-10-7 id=__codelineno-10-7 name=__codelineno-10-7></a>#namespace: csvimport-
</span><span id=__span-10-8><a href=#__codelineno-10-8 id=__codelineno-10-8 name=__codelineno-10-8></a>#
</span><span id=__span-10-9><a href=#__codelineno-10-9 id=__codelineno-10-9 name=__codelineno-10-9></a>#connect: {"from": "ParentId", "to": "displayName", "invert": true, "style": "curved=1;endArrow=blockThin;endFill=1;fontSize=11;edgeStyle=orthogonalEdgeStyle;"}
</span><span id=__span-10-10><a href=#__codelineno-10-10 id=__codelineno-10-10 name=__codelineno-10-10></a>#
</span><span id=__span-10-11><a href=#__codelineno-10-11 id=__codelineno-10-11 name=__codelineno-10-11></a>## Node width and height, and padding for autosize
</span><span id=__span-10-12><a href=#__codelineno-10-12 id=__codelineno-10-12 name=__codelineno-10-12></a>#width: auto
</span><span id=__span-10-13><a href=#__codelineno-10-13 id=__codelineno-10-13 name=__codelineno-10-13></a>#height: auto
</span><span id=__span-10-14><a href=#__codelineno-10-14 id=__codelineno-10-14 name=__codelineno-10-14></a>#padding: -12
</span><span id=__span-10-15><a href=#__codelineno-10-15 id=__codelineno-10-15 name=__codelineno-10-15></a>#
</span><span id=__span-10-16><a href=#__codelineno-10-16 id=__codelineno-10-16 name=__codelineno-10-16></a>## ignore: id,image,fill,stroke,refs,manager
</span><span id=__span-10-17><a href=#__codelineno-10-17 id=__codelineno-10-17 name=__codelineno-10-17></a>#
</span><span id=__span-10-18><a href=#__codelineno-10-18 id=__codelineno-10-18 name=__codelineno-10-18></a>## Column to be renamed to link attribute (used as link).
</span><span id=__span-10-19><a href=#__codelineno-10-19 id=__codelineno-10-19 name=__codelineno-10-19></a>## link: url
</span><span id=__span-10-20><a href=#__codelineno-10-20 id=__codelineno-10-20 name=__codelineno-10-20></a>#
</span><span id=__span-10-21><a href=#__codelineno-10-21 id=__codelineno-10-21 name=__codelineno-10-21></a>## Spacing between nodes, heirarchical levels and parallel connections.
</span><span id=__span-10-22><a href=#__codelineno-10-22 id=__codelineno-10-22 name=__codelineno-10-22></a>#nodespacing: 40
</span><span id=__span-10-23><a href=#__codelineno-10-23 id=__codelineno-10-23 name=__codelineno-10-23></a>#levelspacing: 100
</span><span id=__span-10-24><a href=#__codelineno-10-24 id=__codelineno-10-24 name=__codelineno-10-24></a>#edgespacing: 40
</span><span id=__span-10-25><a href=#__codelineno-10-25 id=__codelineno-10-25 name=__codelineno-10-25></a>#
</span><span id=__span-10-26><a href=#__codelineno-10-26 id=__codelineno-10-26 name=__codelineno-10-26></a>## layout: auto
</span><span id=__span-10-27><a href=#__codelineno-10-27 id=__codelineno-10-27 name=__codelineno-10-27></a>#layout: verticaltree
</span><span id=__span-10-28><a href=#__codelineno-10-28 id=__codelineno-10-28 name=__codelineno-10-28></a>#
</span><span id=__span-10-29><a href=#__codelineno-10-29 id=__codelineno-10-29 name=__codelineno-10-29></a>## ---- CSV below this line. First line are column names. ----
</span><span id=__span-10-30><a href=#__codelineno-10-30 id=__codelineno-10-30 name=__codelineno-10-30></a>id,displayName,itemType,ParentId
</span><span id=__span-10-31><a href=#__codelineno-10-31 id=__codelineno-10-31 name=__codelineno-10-31></a>1,Tenant Root Group,Management Group,
</span><span id=__span-10-32><a href=#__codelineno-10-32 id=__codelineno-10-32 name=__codelineno-10-32></a>2,Intermediary Management Group,Management Group,Tenant Root Group
</span><span id=__span-10-33><a href=#__codelineno-10-33 id=__codelineno-10-33 name=__codelineno-10-33></a>3,Decommissioned,Management Group,Intermediary Management Group
</span><span id=__span-10-34><a href=#__codelineno-10-34 id=__codelineno-10-34 name=__codelineno-10-34></a>4,Landing Zones,Management Group,Intermediary Management Group
</span><span id=__span-10-35><a href=#__codelineno-10-35 id=__codelineno-10-35 name=__codelineno-10-35></a>5,Platform,Management Group,Intermediary Management Group
</span><span id=__span-10-36><a href=#__codelineno-10-36 id=__codelineno-10-36 name=__codelineno-10-36></a>6,Sandboxes,Management Group,Landing Zones
</span><span id=__span-10-37><a href=#__codelineno-10-37 id=__codelineno-10-37 name=__codelineno-10-37></a>7,Corp,Management Group,Landing Zones
</span><span id=__span-10-38><a href=#__codelineno-10-38 id=__codelineno-10-38 name=__codelineno-10-38></a>8,Online,Management Group,Landing Zones
</span><span id=__span-10-39><a href=#__codelineno-10-39 id=__codelineno-10-39 name=__codelineno-10-39></a>9,Connectivity,Management Group,Platform
</span><span id=__span-10-40><a href=#__codelineno-10-40 id=__codelineno-10-40 name=__codelineno-10-40></a>10,Identity,Management Group,Platform
</span><span id=__span-10-41><a href=#__codelineno-10-41 id=__codelineno-10-41 name=__codelineno-10-41></a>11,Management,Management Group,Platform
</span><span id=__span-10-42><a href=#__codelineno-10-42 id=__codelineno-10-42 name=__codelineno-10-42></a>12,subcr-1,Subscription,Decommissioned
</span><span id=__span-10-43><a href=#__codelineno-10-43 id=__codelineno-10-43 name=__codelineno-10-43></a>13,subcr-2,Subscription,Sandboxes
</span><span id=__span-10-44><a href=#__codelineno-10-44 id=__codelineno-10-44 name=__codelineno-10-44></a>14,subcr-3,Subscription,Corp
</span><span id=__span-10-45><a href=#__codelineno-10-45 id=__codelineno-10-45 name=__codelineno-10-45></a>15,subcr-4,Subscription,Online
</span><span id=__span-10-46><a href=#__codelineno-10-46 id=__codelineno-10-46 name=__codelineno-10-46></a>16,subcr-5,Subscription,Connectivity
</span><span id=__span-10-47><a href=#__codelineno-10-47 id=__codelineno-10-47 name=__codelineno-10-47></a>17,subcr-6,Subscription,Identity
</span><span id=__span-10-48><a href=#__codelineno-10-48 id=__codelineno-10-48 name=__codelineno-10-48></a>18,subcr-7,Subscription,Management
</span></code></pre></div> <h3 id=make-your-diagram-animated-and-interactive><a class=toclink href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/#make-your-diagram-animated-and-interactive>Make your diagram animated and interactive</a></h3> <p>You can make your diagram animated and interactive by following these steps:</p> <ol> <li>File &gt; Export as &gt; URL</li> <li>Add &amp;p=ex after the first ? in the URL.</li> </ol> <p>For example, the URL should look like this:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-11-1><a href=#__codelineno-11-1 id=__codelineno-11-1 name=__codelineno-11-1></a>https://viewer.diagrams.net/?&amp;p=ex&amp;tags=%7B%7D&amp;highlight=0000ff&amp;layers=1&amp;nav=1&amp;title=MGs.drawio#R7Zxbc5s4FMc%2FjR%2BbAQkEPK7dJHWn3XbW6exMX3ZkkLFakDxCvvXTr7jFxrZi1k0Wg5lxYnR0QfqfHxqOBB7AUbx5FHgx%2F8wDEg2AEWwG8P0AAGAgQ32llm1uMU0X5pZQ0KCw7QwT%2BosUxqJiuKQBSSoFJeeRpIuq0eeMEV9WbFgIvq4Wm%2FGoetYFDsmRYeLj6Nj6Nw3kvBwG8nYZHwgN58WpXeDkGTEuCxcjSeY44Os9E7wfwJHgXOZH8WZEolS9Upe83oMm97ljgjB5osK3hIgv0x%2BpJsCI8FQ5Jis0AHZAk0WEt3%2FimKhU3k7Z7HBLxq7x42mcwOHy%2B0dn9PCRvIOFz%2FYrZqWfCMMsPcFf6TCA8Sj4clE0KEn8tF0UBT9jpoSKCTso9TXr%2Fjgo%2B5YNKcI%2BmStHEbHvvKoMidyWLioGN6Rx7ksah0qFiE7Vf%2FxrKUgqSkgYEVjVfNh15Z%2BsI8ldsgpV9fVcdXmyUOdWbawVzso2l3Eqm6kOVVEWkKBIpSjRKBrxiIusF3aaTNWEw0QK%2FpPssiDyXTKdqZxqFRhg4s58ZV9wymQ2VnuoPsadcsrIqPzZqsLoOc88zFOftFOpfCsiJNloIdnX8pHwmEixVUWKCpYD7goituU1nCfXO%2FqB4ea2%2BR74dmHDhc%2FC57Z3TKqDwoFlco%2FS16fW0lA7ZpKImAQUZ0PXsXkJwS9cED3WDWINnQOsTegec%2B20g2tbw%2FV74vM4pklCOVMuvRjimtdHD3RzQJezcjlJ2%2BiIZtNrB81IQ%2FMnzALKFCLGd4Vz0uPcYZyhZ57nuSWzs6Ph%2BWuE5YyLuAe5wyB7rn0eZKsdILsakCdqYp7yze9MySfn9p7bBu8nAKxwCx3rmFvUDm49DbcjLn4jsuuRvTJkLWieRxa0AlnL0CD7hUWUkR7azkBre955aGE7oDW182y2FE9XVG4vR7d6u9wz2xyzjuN05d7AAhpmx4ESo%2Be1E7wexmBtnmN1G2%2F7TPbEtp1Y00Q1wq92rH9Zul23ZDn1xTvzFK%2BT5TTxBV1IytkpUk9tbLwxr%2FtdentWAzRFNjpmdTabAf8VWc0GXz7HANAr3dPWmG5bEofpdtZydsEl7B6slvXYXgu2wKrOuZYHWsutbg8t5xZewu1utaxH9lqQPVzyajOyum2yHFnrEmT3V8t6aK8FWmRYnYFWtyWWQ2tfAu3xalmP7rWg63hOZ9DV7Yrl6KJL0K0umvXYXgu2nmd0BVtbtzOWY%2Btcgu3h2lkP7rWAa5qu2yS5Ry9ZnGayGNcKR0tSog2qjPhLsXp2IGHBH%2BmrKCo5jbj%2F82lOWW5%2BSB2ZF5pxJovXX8ysUhCSSdEgF3LOQ85wdL%2BzFoKn5V6WW3WML4VPXhhS%2BYKHxCIk8qWC1mkHChJhdQ9T7cl%2FcEZN5UH3lLfqKm83qjy8YeVRo8pbN6y806jydveUR3WVdxtVHt2w8l6jyju3q3z%2BFF5jyrvdU96pq7wmLPiflPduWHnQpPLlrwPcpPKwUeU7GMPadZVvNIZFHYxh3brKNxrDog7GsF5d5RuNYVH3YtjylY3zyjcaw6LuxbDlewfnlW80hkXdi2HLp%2BfPK99oDIu6F8Naddfn7TeKYVVy90tVWd7eD37B%2B38B#%7B%22pageId%22%3A%22UGUHswWqf16rUITyRAQM%22%7D
</span></code></pre></div> <p>You can check it <a href="https://viewer.diagrams.net/?&p=ex&tags=%7B%7D&highlight=0000ff&layers=1&nav=1&title=MGs.drawio#R7Zxbc5s4FMc%2FjR%2BbAQkEPK7dJHWn3XbW6exMX3ZkkLFakDxCvvXTr7jFxrZi1k0Wg5lxYnR0QfqfHxqOBB7AUbx5FHgx%2F8wDEg2AEWwG8P0AAGAgQ32llm1uMU0X5pZQ0KCw7QwT%2BosUxqJiuKQBSSoFJeeRpIuq0eeMEV9WbFgIvq4Wm%2FGoetYFDsmRYeLj6Nj6Nw3kvBwG8nYZHwgN58WpXeDkGTEuCxcjSeY44Os9E7wfwJHgXOZH8WZEolS9Upe83oMm97ljgjB5osK3hIgv0x%2BpJsCI8FQ5Jis0AHZAk0WEt3%2FimKhU3k7Z7HBLxq7x42mcwOHy%2B0dn9PCRvIOFz%2FYrZqWfCMMsPcFf6TCA8Sj4clE0KEn8tF0UBT9jpoSKCTso9TXr%2Fjgo%2B5YNKcI%2BmStHEbHvvKoMidyWLioGN6Rx7ksah0qFiE7Vf%2FxrKUgqSkgYEVjVfNh15Z%2BsI8ldsgpV9fVcdXmyUOdWbawVzso2l3Eqm6kOVVEWkKBIpSjRKBrxiIusF3aaTNWEw0QK%2FpPssiDyXTKdqZxqFRhg4s58ZV9wymQ2VnuoPsadcsrIqPzZqsLoOc88zFOftFOpfCsiJNloIdnX8pHwmEixVUWKCpYD7goituU1nCfXO%2FqB4ea2%2BR74dmHDhc%2FC57Z3TKqDwoFlco%2FS16fW0lA7ZpKImAQUZ0PXsXkJwS9cED3WDWINnQOsTegec%2B20g2tbw%2FV74vM4pklCOVMuvRjimtdHD3RzQJezcjlJ2%2BiIZtNrB81IQ%2FMnzALKFCLGd4Vz0uPcYZyhZ57nuSWzs6Ph%2BWuE5YyLuAe5wyB7rn0eZKsdILsakCdqYp7yze9MySfn9p7bBu8nAKxwCx3rmFvUDm49DbcjLn4jsuuRvTJkLWieRxa0AlnL0CD7hUWUkR7azkBre955aGE7oDW182y2FE9XVG4vR7d6u9wz2xyzjuN05d7AAhpmx4ESo%2Be1E7wexmBtnmN1G2%2F7TPbEtp1Y00Q1wq92rH9Zul23ZDn1xTvzFK%2BT5TTxBV1IytkpUk9tbLwxr%2FtdentWAzRFNjpmdTabAf8VWc0GXz7HANAr3dPWmG5bEofpdtZydsEl7B6slvXYXgu2wKrOuZYHWsutbg8t5xZewu1utaxH9lqQPVzyajOyum2yHFnrEmT3V8t6aK8FWmRYnYFWtyWWQ2tfAu3xalmP7rWg63hOZ9DV7Yrl6KJL0K0umvXYXgu2nmd0BVtbtzOWY%2Btcgu3h2lkP7rWAa5qu2yS5Ry9ZnGayGNcKR0tSog2qjPhLsXp2IGHBH%2BmrKCo5jbj%2F82lOWW5%2BSB2ZF5pxJovXX8ysUhCSSdEgF3LOQ85wdL%2BzFoKn5V6WW3WML4VPXhhS%2BYKHxCIk8qWC1mkHChJhdQ9T7cl%2FcEZN5UH3lLfqKm83qjy8YeVRo8pbN6y806jydveUR3WVdxtVHt2w8l6jyju3q3z%2BFF5jyrvdU96pq7wmLPiflPduWHnQpPLlrwPcpPKwUeU7GMPadZVvNIZFHYxh3brKNxrDog7GsF5d5RuNYVH3YtjylY3zyjcaw6LuxbDlewfnlW80hkXdi2HLp%2BfPK99oDIu6F8Naddfn7TeKYVVy90tVWd7eD37B%2B38B#%7B%22pageId%22%3A%22UGUHswWqf16rUITyRAQM%22%7D">here</a></p> <h3 id=references><a class=toclink href=../../2024/04/24/how-to-create-a-management-group-diagram-with-drawio/#references>References</a></h3> <ul> <li><a href=https://drawio-app.com/blog/automatically-create-draw-io-diagrams-from-csv-files/ >Automatically create draw.io diagrams from CSV files</a></li> <li><a href=https://drawio-app.com/blog/animation-and-automatic-layout-explore-complex-diagrams/ >Animation and Automatic Layout: Explore Complex Diagrams</a></li> </ul> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-23 00:00:00">April 23, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 2 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=moving-management-groups-and-subscriptions><a href=../../2024/04/23/moving-management-groups-and-subscriptions/ class=toclink>Moving Management Groups and Subscriptions</a></h2> <p>Managing your Azure resources efficiently often involves moving management groups and subscriptions. Here's a brief guide on how to do it:</p> <h3 id=moving-management-groups><a class=toclink href=../../2024/04/23/moving-management-groups-and-subscriptions/#moving-management-groups>Moving Management Groups</a></h3> <p>To move a management group, you need to have the necessary permissions. You must be an owner of the target parent management group and have <code>Management Group Contributor</code> role at the group you want to move.</p> <p>Here's the step-by-step process:</p> <ol> <li>Navigate to the <strong>Azure portal</strong>.</li> <li>Go to <strong>Management groups</strong>.</li> <li>Select the management group you want to move.</li> <li>Click <strong>Details</strong>.</li> <li>Under <strong>Parent group</strong>, click <strong>Change</strong>.</li> <li>Choose the new parent group from the list and click <strong>Save</strong>.</li> </ol> <p>Remember, moving a management group will also move all its child resources including other management groups and subscriptions.</p> <h3 id=moving-subscriptions><a class=toclink href=../../2024/04/23/moving-management-groups-and-subscriptions/#moving-subscriptions>Moving Subscriptions</a></h3> <p>You can move a subscription from one management group to another or within the same management group. To do this, you must have the <code>Owner</code> or <code>Contributor</code> role at the target management group and <code>Owner</code> role at the subscription level.</p> <p>Follow these steps:</p> <ol> <li>Go to the <strong>Azure portal</strong>.</li> <li>Navigate to <strong>Management groups</strong>.</li> <li>Select the management group where the subscription currently resides.</li> <li>Click on <strong>Subscriptions</strong>.</li> <li>Find the subscription you want to move and select <strong>..."</strong> (More options).</li> <li>Click <strong>Change parent</strong>.</li> <li>In the pop-up window, select the new parent management group and click <strong>Save</strong>.</li> </ol> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Moving subscriptions could affect the resources if there are policies or permissions applied at the management group level. It's important to understand the implications before making the move. Also, keep in mind that you cannot move the Root management group or rename it.</p> </div> <p>In conclusion, moving management groups and subscriptions allows for better organization and management of your Azure resources. However, it should be done carefully considering the impact on resources and compliance with assigned policies.</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-22 00:00:00">April 22, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 6 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=management-groups><a href=../../2024/04/22/management-groups/ class=toclink>Management Groups</a></h2> <h3 id=what-are-management-groups><a class=toclink href=../../2024/04/22/management-groups/#what-are-management-groups>What are Management Groups?</a></h3> <p>Management Groups are a way to manage access, policies, and compliance for multiple subscriptions. They provide a way to manage access, policies, and compliance for multiple subscriptions. Management groups are containers that help you manage access, policy, and compliance for multiple subscriptions. You organize subscriptions into containers called "management groups" and apply your governance conditions to the management groups. All subscriptions within a management group automatically inherit the conditions applied to the management group.</p> <h3 id=management-groups-hierarchy><a class=toclink href=../../2024/04/22/management-groups/#management-groups-hierarchy>Management Groups Hierarchy</a></h3> <p>The management group hierarchy is a level of management groups that represent the different levels of your organization. The hierarchy starts with a single root management group, which represents the Microsoft Entra ID tenant. The root management group is the highest level in the hierarchy. All other management groups are subgroups of the root management group.</p> <h3 id=management-group-design-considerations><a class=toclink href=../../2024/04/22/management-groups/#management-group-design-considerations>Management group design considerations</a></h3> <p>When designing your management group hierarchy, consider the following:</p> <ul> <li> <p>How does your organization differentiate services that are managed or run by particular teams?</p> </li> <li> <p>Are there any specific operations that need to be isolated due to business or regulatory compliance requirements?</p> </li> <li> <p>Management groups can be utilized to consolidate policy and initiative assignments through Azure Policy.</p> </li> <li> <p>A management group hierarchy can accommodate up to six nested levels. The tenant root level and the subscription level are not included in this count.</p> </li> <li> <p>Any principal, be it a user or service principal, within a Microsoft Entra tenant has the authority to establish new management groups. This is due to the fact that Azure role-based access control (RBAC) authorization for managing group activities is not activated by default. For additional details, refer to the guide on safeguarding your resource hierarchy.</p> </li> <li> <p>By default, all newly created subscriptions will be assigned to the tenant root management group.</p> </li> </ul> <h3 id=management-group-recommendations><a class=toclink href=../../2024/04/22/management-groups/#management-group-recommendations>Management group recommendations</a></h3> <ul> <li> <p>Maintain a relatively flat management group hierarchy, ideally with three to four levels maximum. This practice minimizes managerial complexity and overhead.</p> </li> <li> <p>Refrain from mirroring your organizational structure into a deeply nested management group hierarchy. Utilize management groups primarily for policy assignment rather than billing. This strategy aligns with the Azure landing zone conceptual architecture, which applies Azure policies to workloads that need similar security and compliance at the same management group level.</p> </li> <li> <p>Establish management groups under your root-level group representing different types of workloads you will host. These groups should reflect the security, compliance, connectivity, and feature requirements of the workloads. By doing this, you can apply a set of Azure policies at the management group level for all workloads with similar needs.</p> </li> <li> <p>Leverage resource tags for querying and horizontally traversing across the management group hierarchy. Resource tags, enforced or appended via Azure Policy, allow you to group resources for search purposes without relying on a complex management group hierarchy.</p> </li> <li> <p>Set up a top-level sandbox management group. This allows users to immediately experiment with Azure and try out resources not yet permitted in production environments. The sandbox provides isolation from your development, testing, and production settings.</p> </li> <li> <p>Create a platform management group beneath the root management group to support common platform policy and Azure role assignments. This ensures distinct policies can be applied to subscriptions used for your Azure foundation and centralizes billing for common resources in one foundational subscription set.</p> </li> <li> <p>Minimize the number of Azure Policy assignments made at the root management group scope. This reduces the debugging of inherited policies in lower-level management groups.</p> </li> <li> <p>Implement policies to enforce compliance requirements either at the management group or subscription scope to achieve policy-driven governance.</p> </li> <li> <p>Ensure only privileged users have operational access to management groups in the tenant. Enable Azure RBAC authorization in the management group <a href=https://learn.microsoft.com/en-us/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting-require-authorization>hierarchy settings</a> to fine-tune user privileges. By default, all users are authorized to create their own management groups under the root management group.</p> </li> <li> <p>Set up a default, dedicated management group for new subscriptions. This prevents any subscriptions from being placed under the root management group. This is particularly important if there are users eligible for Microsoft Developer Network (MSDN) or Visual Studio benefits and subscriptions. A sandbox management group could be a suitable candidate for this type of management group. For more information, see <a href=https://learn.microsoft.com/en-us/azure/governance/management-groups/how-to/protect-resource-hierarchy#setting---default-management-group>Setting - default management group</a>.</p> </li> <li> <p>Avoid creating management groups for production, testing, and development environments. If needed, separate these groups into different subscriptions within the same management group.</p> </li> </ul> <h3 id=management-group-structure-in-the-enterprise-scale-landing-zone><a class=toclink href=../../2024/04/22/management-groups/#management-group-structure-in-the-enterprise-scale-landing-zone>Management Group Structure in the Enterprise Scale Landing Zone</a></h3> <p>This is the common structure for the Management Groups in the Enterprise Scale Landing Zone: </p> <pre class=mermaid><code>    graph TD
        A[Root Management Group] --&gt; B[Intermediary-Management-Group]
        B --&gt; C[Decommissioned]
        B --&gt; D[Landing Zones]
        B --&gt; E[Platform]
        D --&gt; F[Sandboxex]
        D --&gt; G[Corp]
        D --&gt; H[Online]
        E --&gt; I[Connectivity]
        E --&gt; J[Identity]
        E --&gt; K[Management]</code></pre> <ol> <li><strong>Root Management Group</strong><ul> <li>Intermediary-Management-Group<ul> <li>Decommissioned: This could be where resources that are being phased out or decommissioned are managed.</li> <li>Landing Zones<ul> <li>Sandboxes: This could be an area where developers can test and experiment without affecting production systems.</li> <li>Corp: This could represent corporate resources or applications.</li> <li>Online: This could represent online or customer-facing applications.</li> </ul> </li> <li>Platform<ul> <li>Connectivity: This could manage resources related to network connectivity.</li> <li>Identity: This could manage resources related to identity and access management.</li> <li>Management: This could manage resources related to overall platform management.</li> </ul> </li> </ul> </li> </ul> </li> </ol> <p>This structure allows for clear segmentation of resources based on their purpose and lifecycle. For example, decommissioned resources are separated from active ones, and resources within the 'Platform' are further categorized based on their function (Connectivity, Identity, Management). The 'Landing Zones' group appears to separate resources based on their use case or environment (Sandbox, Corp, Online).</p> <p>The exact interpretation would depend on the specific context and conventions of your organization.</p> <h3 id=bad-examples><a class=toclink href=../../2024/04/22/management-groups/#bad-examples>Bad Examples</a></h3> <h4 id=example-1-deeply-nested-hierarchy><a class=toclink href=../../2024/04/22/management-groups/#example-1-deeply-nested-hierarchy>Example 1: Deeply Nested Hierarchy</a></h4> <pre class=mermaid><code>graph TD
    A[Root Management Group] --&gt; B[Group 1]
    B --&gt; C[Group 2]
    C --&gt; D[Group 3]
    D --&gt; E[Group 4]
    E --&gt; F[Group 5]
    F --&gt; G[Group 6]</code></pre> <p><strong>Why it's bad:</strong> This hierarchy is too deep. It becomes difficult to manage and increases complexity. Azure supports up to six levels of nested management groups but it's recommended to keep the hierarchy as flat as possible for simplicity.</p> <h4 id=example-2-unorganized-structure><a class=toclink href=../../2024/04/22/management-groups/#example-2-unorganized-structure>Example 2: Unorganized Structure</a></h4> <pre class=mermaid><code>graph TD
    A[Root Management Group] --&gt; B[Group 1]
    A --&gt; C[Group 2]
    B --&gt; D[Group 3]
    C --&gt; E[Group 4]
    D --&gt; F[Group 5]
    E --&gt; G[Group 6]</code></pre> <p><strong>Why it's bad:</strong> The structure is not well-organized and doesn't follow a logical grouping or hierarchy. This can lead to confusion and difficulty in managing resources and policies.</p> <h4 id=example-3-single-level-hierarchy><a class=toclink href=../../2024/04/22/management-groups/#example-3-single-level-hierarchy>Example 3: Single Level Hierarchy</a></h4> <pre class=mermaid><code>graph TD
    A[Root Management Group] --&gt; B[Group 1]
    A --&gt; C[Group 2]
    A --&gt; D[Group 3]
    A --&gt; E[Group 4]
    A --&gt; F[Group 5]
    A --&gt; G[Group 6]</code></pre> <p><strong>Why it's bad:</strong> Although this structure is simple, it lacks the ability to group related subscriptions together under a common management group. This makes it harder to apply consistent policies across related subscriptions.</p> <h4 id=example-4-overlapping-hierarchies><a class=toclink href=../../2024/04/22/management-groups/#example-4-overlapping-hierarchies>Example 4: Overlapping Hierarchies</a></h4> <pre class=mermaid><code>graph TD
    A[Root Management Group] --&gt; B[Group 1]
    A --&gt; C[Group 2]
    B --&gt; D[Group 3]
    C --&gt; D</code></pre> <p><strong>Why it's bad:</strong> In this example, <code>Group 3</code> is a subgroup of both <code>Group 1</code> and <code>Group 2</code>. This can create confusion and potential conflicts with policy assignments. It's better to have a clear, non-overlapping hierarchy where each group is a subgroup of only one higher-level group.</p> <h4 id=example-5-environment-based-hierarchy><a class=toclink href=../../2024/04/22/management-groups/#example-5-environment-based-hierarchy>Example 5: Environment-Based Hierarchy</a></h4> <pre class=mermaid><code>
graph TD
    A[Root Management Group] --&gt; B[Production Management Group]
    A[Root Management Group] --&gt; C[Development Management Group]
    A[Root Management Group] --&gt; D[Testing Management Group]</code></pre> <p><strong>Why it's bad:</strong> This structure separates environments into different management groups, which can lead to duplication of policies and increased complexity. It's better to use subscriptions within the same management group to separate environments and apply policies accordingly.</p> <h3 id=good-examples><a class=toclink href=../../2024/04/22/management-groups/#good-examples>Good examples</a></h3> <pre class=mermaid><code>    graph TD
        A[Root Management Group] --&gt; B[Intermediary-Management-Group]
        B --&gt; C[Decommissioned]
        B --&gt; D[Landing Zones]
        B --&gt; E[Platform]
        D --&gt; F[Sandboxes]
        D --&gt; G[Corp]
        D --&gt; H[Online]
        E --&gt; I[Connectivity]
        E --&gt; J[Identity]
        E --&gt; K[Management]</code></pre> <p><img alt=ð class=twemoji src=https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f604.svg title=:smile:></p> <h3 id=references><a class=toclink href=../../2024/04/22/management-groups/#references>References</a></h3> <ul> <li>https://learn.microsoft.com/en-us/azure/cloud-adoption-framework/ready/landing-zone/design-area/resource-org-management-groups</li> <li>https://learn.microsoft.com/en-us/azure/governance/management-groups/overview</li> </ul> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-17 00:00:00">April 17, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 1 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=cambio-de-nombres-de-los-niveles-de-servicio-de-microsoft-defender-para-cloud><a href=../../2024/04/17/cambio-de-nombres-de-los-niveles-de-servicio-de-microsoft-defender-para-cloud/ class=toclink>Cambio de nombres de los niveles de servicio de Microsoft Defender para Cloud</a></h2> <p>No es nuevo pero me gustarÃ­a recordar que Microsoft ha cambiado los nombres de los niveles de servicio de Microsoft Defender para Cloud. A continuaciÃ³n, se muestra una tabla con los nombres anteriores y los nuevos nombres de los niveles de servicio de Microsoft Defender para Cloud:</p> <table> <thead> <tr> <th>Nombre ANTERIOR del nivel de servicioÂ 2</th> <th>Nombre NUEVO del nivel de servicioÂ 2</th> <th>Nivel de servicio: nivel de servicioÂ 4 (sin cambios)</th> </tr> </thead> <tbody> <tr> <td>Advanced Data Security</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para SQL</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para registros de contenedor</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para DNS</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para Key Vault</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para Kubernetes</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para MySQL</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para PostgreSQL</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para Resource Manager</td> </tr> <tr> <td>Advanced Threat Protection</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para Storage</td> </tr> <tr> <td>Azure Defender</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>AdministraciÃ³n de superficie expuesta a ataques externos de Defender</td> </tr> <tr> <td>Azure Defender</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para Azure CosmosÂ DB</td> </tr> <tr> <td>Azure Defender</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para contenedores</td> </tr> <tr> <td>Azure Defender</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender for MariaDB</td> </tr> <tr> <td>Security Center</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para App Service</td> </tr> <tr> <td>Security Center</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>Defender para servidores</td> </tr> <tr> <td>Security Center</td> <td>MicrosoftÂ DefenderÂ forÂ Cloud</td> <td>AdministraciÃ³n de la posiciÃ³n de seguridad en la nube de Defender</td> </tr> </tbody> </table> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-17 00:00:00">April 17, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 1 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=azure-policy-useful-queries><a href=../../2024/04/17/azure-policy-useful-queries/ class=toclink>Azure Policy useful queries</a></h2> <h3 id=policy-assignments-and-information-about-each-of-its-respective-definitions><a class=toclink href=../../2024/04/17/azure-policy-useful-queries/#policy-assignments-and-information-about-each-of-its-respective-definitions>Policy assignments and information about each of its respective definitions</a></h3> <div class="language-kusto highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=c>// Policy assignments and information about each of its respective definitions</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=c>// Gets policy assignments in your environment with the respective assignment name,definition associated, category of definition (if applicable), as well as whether the definition type is an initiative or a single policy.</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=n>policyResources</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=p>|</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=p>=~</span><span class=s>'Microsoft.Authorization/PolicyAssignments'</span>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=p>|</span><span class=w> </span><span class=k>project</span><span class=w> </span><span class=n>policyAssignmentId</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>tolower</span><span class=p>(</span><span class=n>tostring</span><span class=p>(</span><span class=n>id</span><span class=p>)),</span><span class=w> </span><span class=n>policyAssignmentDisplayName</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>tostring</span><span class=p>(</span><span class=n>properties</span><span class=err>.</span><span class=n>displayName</span><span class=p>),</span><span class=w> </span><span class=n>policyAssignmentDefinitionId</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>tolower</span><span class=p>(</span><span class=n>properties</span><span class=err>.</span><span class=n>policyDefinitionId</span><span class=p>)</span>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=p>|</span><span class=w> </span><span class=k>join</span><span class=w> </span><span class=n>kind</span><span class=p>=</span><span class=n>leftouter</span><span class=p>(</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a><span class=w> </span><span class=n>policyResources</span>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w> </span><span class=p>|</span><span class=w> </span><span class=k>where</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=p>=~</span><span class=s>'Microsoft.Authorization/PolicySetDefinitions'</span><span class=w> </span><span class=k>or</span><span class=w> </span><span class=n>type</span><span class=w> </span><span class=p>=~</span><span class=s>'Microsoft.Authorization/PolicyDefinitions'</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w> </span><span class=p>|</span><span class=w> </span><span class=k>project</span><span class=w> </span><span class=n>definitionId</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>tolower</span><span class=p>(</span><span class=n>id</span><span class=p>),</span><span class=w> </span><span class=n>category</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>tostring</span><span class=p>(</span><span class=n>properties</span><span class=err>.</span><span class=n>metadata</span><span class=err>.</span><span class=n>category</span><span class=p>),</span><span class=w> </span><span class=n>definitionType</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=n>iff</span><span class=p>(</span><span class=n>type</span><span class=w> </span><span class=p>=~</span><span class=w> </span><span class=s>'Microsoft.Authorization/PolicysetDefinitions'</span><span class=p>,</span><span class=w> </span><span class=s>'initiative'</span><span class=p>,</span><span class=w> </span><span class=s>'policy'</span><span class=p>)</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a><span class=p>)</span><span class=w> </span><span class=k>on</span><span class=w> </span><span class=err>$</span><span class=n>left</span><span class=err>.</span><span class=n>policyAssignmentDefinitionId</span><span class=w> </span><span class=p>==</span><span class=w> </span><span class=err>$</span><span class=n>right</span><span class=err>.</span><span class=n>definitionId</span>
</span></code></pre></div> <ul> <li><a href=https://https://gist.github.com/timothywarner/8e5b6dea296f506871223883eb33059e>Original Gist</a></li> </ul> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-07 00:00:00">April 7, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 4 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account><a href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/ class=toclink>How to use Azue ARC-enabled servers with managed identity to access to Azure Storage Account</a></h2> <p>In this demo we will show how to use Azure ARC-enabled servers with managed identity to access to Azure Storage Account.</p> <h3 id=prerequisites><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#prerequisites>Prerequisites</a></h3> <ul> <li>An Azure subscription. If you don't have an Azure subscription, create a <a href=https://azure.microsoft.com/en-us/free/ >free account</a> before you begin.</li> </ul> <h3 id=required-permissions><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#required-permissions>Required permissions</a></h3> <p>You'll need the following Azure built-in roles for different aspects of managing connected machines:</p> <ul> <li>To onboard machines, you must have theÂ <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#azure-connected-machine-onboarding>Azure Connected Machine Onboarding</a>Â orÂ <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#contributor>Contributor</a>Â role for the resource group where you're managing the servers.</li> <li>To read, modify, and delete a machine, you must have theÂ <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#azure-connected-machine-resource-administrator>Azure Connected Machine Resource Administrator</a>Â role for the resource group.</li> <li>To select a resource group from the drop-down list when using theÂ <strong>Generate script</strong>Â method, you'll also need theÂ <a href=https://learn.microsoft.com/en-us/azure/role-based-access-control/built-in-roles#reader>Reader</a>Â role for that resource group (or another role that includesÂ <strong>Reader</strong>Â access).</li> </ul> <h3 id=register-azure-resource-providers><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#register-azure-resource-providers>Register Azure resource providers</a></h3> <p>To use Azure Arc-enabled servers with managed identity, you need to register the following resource providers:</p> <div class="language-bash highlight"><pre><span></span><code><span id=__span-18-1><a href=#__codelineno-18-1 id=__codelineno-18-1 name=__codelineno-18-1></a>az<span class=w> </span>account<span class=w> </span><span class=nb>set</span><span class=w> </span>--subscription<span class=w> </span><span class=s2>"{Your Subscription Name}"</span>
</span><span id=__span-18-2><a href=#__codelineno-18-2 id=__codelineno-18-2 name=__codelineno-18-2></a>az<span class=w> </span>provider<span class=w> </span>register<span class=w> </span>--namespace<span class=w> </span><span class=s1>'Microsoft.HybridCompute'</span>
</span><span id=__span-18-3><a href=#__codelineno-18-3 id=__codelineno-18-3 name=__codelineno-18-3></a>az<span class=w> </span>provider<span class=w> </span>register<span class=w> </span>--namespace<span class=w> </span><span class=s1>'Microsoft.GuestConfiguration'</span>
</span><span id=__span-18-4><a href=#__codelineno-18-4 id=__codelineno-18-4 name=__codelineno-18-4></a>az<span class=w> </span>provider<span class=w> </span>register<span class=w> </span>--namespace<span class=w> </span><span class=s1>'Microsoft.HybridConnectivity'</span>
</span><span id=__span-18-5><a href=#__codelineno-18-5 id=__codelineno-18-5 name=__codelineno-18-5></a>az<span class=w> </span>provider<span class=w> </span>register<span class=w> </span>--namespace<span class=w> </span><span class=s1>'Microsoft.AzureArcData'</span>
</span></code></pre></div> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Microsoft.AzureArcData (if you plan to Arc-enable SQL Servers) Microsoft.Compute (for Azure Update Manager and automatic extension upgrades)</p> </div> <h3 id=networking-requirements><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#networking-requirements>Networking requirements</a></h3> <p>The Azure Connected Machine agent for Linux and Windows communicates outbound securely to Azure Arc over TCP port 443. In this demo, we have use <a href=https://learn.microsoft.com/en-us/azure/azure-arc/servers/private-link-security#network-configuration>Azure Private Link</a>. </p> <h3 id=azure-arc-enabled-enabled-server><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#azure-arc-enabled-enabled-server>Azure ARC-enabled enabled server</a></h3> <p>We use <a href=https://azurearcjumpstart.io/azure_arc_jumpstart/azure_arc_servers/day2/arc_privatelink>Use Azure Private Link to securely connect networks to Azure Arc-enabled servers</a> to achieve this.</p> <p>Some tips:</p> <ul> <li> <p>If you have any issue registerin de VM: generate a script to register a machine with Azure Arc following that instructions <a href=https://learn.microsoft.com/en-us/azure/azure-arc/servers/learn/quick-enable-hybrid-vm#generate-installation-script>here</a></p> </li> <li> <p>If you have an error that says "Path C:\ProgramData\AzureConnectedMachineAgent\Log\himds.log is busy. Retrying..." you can use the following command to resolve it if you know that you are doing:</p> </li> </ul> <p><div class="language-powershell highlight"><pre><span></span><code><span id=__span-19-1><a href=#__codelineno-19-1 id=__codelineno-19-1 name=__codelineno-19-1></a> <span class=p>(</span><span class=nb>get-wmiobject</span> <span class=n>-class</span> <span class=n>win32_product</span> <span class=p>|</span> <span class=nb>where </span><span class=p>{</span><span class=nv>$_</span><span class=p>.</span><span class=n>name</span> <span class=o>-like</span> <span class=s2>"Azure *"</span><span class=p>}).</span><span class=n>uninstall</span><span class=p>()</span> 
</span></code></pre></div> - Review /etc/hosts file and add the following entries:</p> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-20-1><a href=#__codelineno-20-1 id=__codelineno-20-1 name=__codelineno-20-1></a><span class=nv>$Env:PEname</span> <span class=p>=</span> <span class=s2>"myprivatelink"</span>
</span><span id=__span-20-2><a href=#__codelineno-20-2 id=__codelineno-20-2 name=__codelineno-20-2></a><span class=nv>$Env:resourceGroup</span> <span class=p>=</span> <span class=s2>"myResourceGroup"</span>
</span><span id=__span-20-3><a href=#__codelineno-20-3 id=__codelineno-20-3 name=__codelineno-20-3></a><span class=nv>$file</span> <span class=p>=</span> <span class=s2>"C:\Windows\System32\drivers\etc\hosts"</span>
</span><span id=__span-20-4><a href=#__codelineno-20-4 id=__codelineno-20-4 name=__codelineno-20-4></a>
</span><span id=__span-20-5><a href=#__codelineno-20-5 id=__codelineno-20-5 name=__codelineno-20-5></a><span class=nv>$gisfqdn</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=s1>'[0].privateDnsZoneConfigs[0].recordSets[0].fqdn'</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-6><a href=#__codelineno-20-6 id=__codelineno-20-6 name=__codelineno-20-6></a><span class=nv>$gisIP</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>ipAddresses</span><span class=p>[</span><span class=n>0</span><span class=p>]</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-7><a href=#__codelineno-20-7 id=__codelineno-20-7 name=__codelineno-20-7></a><span class=nv>$hisfqdn</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>fqdn</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-8><a href=#__codelineno-20-8 id=__codelineno-20-8 name=__codelineno-20-8></a><span class=nv>$hisIP</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>ipAddresses</span><span class=p>[</span><span class=n>0</span><span class=p>]</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-9><a href=#__codelineno-20-9 id=__codelineno-20-9 name=__codelineno-20-9></a><span class=nv>$agentfqdn</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>fqdn</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-10><a href=#__codelineno-20-10 id=__codelineno-20-10 name=__codelineno-20-10></a><span class=nv>$agentIp</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>ipAddresses</span><span class=p>[</span><span class=n>0</span><span class=p>]</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-11><a href=#__codelineno-20-11 id=__codelineno-20-11 name=__codelineno-20-11></a><span class=nv>$gasfqdn</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>fqdn</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-12><a href=#__codelineno-20-12 id=__codelineno-20-12 name=__codelineno-20-12></a><span class=nv>$gasIp</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>1</span><span class=p>].</span><span class=n>ipAddresses</span><span class=p>[</span><span class=n>0</span><span class=p>]</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-13><a href=#__codelineno-20-13 id=__codelineno-20-13 name=__codelineno-20-13></a><span class=nv>$dpfqdn</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>2</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>fqdn</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-14><a href=#__codelineno-20-14 id=__codelineno-20-14 name=__codelineno-20-14></a><span class=nv>$dpIp</span> <span class=p>=</span> <span class=p>(</span><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>dns-zone-group</span> <span class=n>list</span> <span class=p>-</span><span class=n>-endpoint-name</span> <span class=nv>$Env:PEname</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$Env:resourceGroup</span> <span class=n>-o</span> <span class=n>json</span> <span class=p>-</span><span class=n>-query</span> <span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>privateDnsZoneConfigs</span><span class=p>[</span><span class=n>2</span><span class=p>].</span><span class=n>recordSets</span><span class=p>[</span><span class=n>0</span><span class=p>].</span><span class=n>ipAddresses</span><span class=p>[</span><span class=n>0</span><span class=p>]</span> <span class=n>-o</span> <span class=n>json</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s1>'.privatelink'</span><span class=p>,</span><span class=s1>''</span><span class=p>).</span><span class=n>replace</span><span class=p>(</span><span class=s2>"</span><span class=se>`"</span><span class=s2>"</span><span class=p>,</span><span class=s2>""</span><span class=p>)</span>
</span><span id=__span-20-15><a href=#__codelineno-20-15 id=__codelineno-20-15 name=__codelineno-20-15></a>
</span><span id=__span-20-16><a href=#__codelineno-20-16 id=__codelineno-20-16 name=__codelineno-20-16></a><span class=nv>$hostfile</span> <span class=p>+=</span> <span class=s2>"$gisIP $gisfqdn"</span>
</span><span id=__span-20-17><a href=#__codelineno-20-17 id=__codelineno-20-17 name=__codelineno-20-17></a><span class=nv>$hostfile</span> <span class=p>+=</span> <span class=s2>"$hisIP $hisfqdn"</span>
</span><span id=__span-20-18><a href=#__codelineno-20-18 id=__codelineno-20-18 name=__codelineno-20-18></a><span class=nv>$hostfile</span> <span class=p>+=</span> <span class=s2>"$agentIP $agentfqdn"</span>
</span><span id=__span-20-19><a href=#__codelineno-20-19 id=__codelineno-20-19 name=__codelineno-20-19></a><span class=nv>$hostfile</span> <span class=p>+=</span> <span class=s2>"$gasIP $gasfqdn"</span>
</span><span id=__span-20-20><a href=#__codelineno-20-20 id=__codelineno-20-20 name=__codelineno-20-20></a><span class=nv>$hostfile</span> <span class=p>+=</span> <span class=s2>"$dpIP $dpfqdn"</span>
</span></code></pre></div> <h3 id=storage-account-configuration><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#storage-account-configuration>Storage Account configuration</a></h3> <h4 id=create-a-storage-account-with-static-website-enabled><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#create-a-storage-account-with-static-website-enabled>Create a Storage Account with static website enabled</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-21-1><a href=#__codelineno-21-1 id=__codelineno-21-1 name=__codelineno-21-1></a><span class=nv>$resourceGroup</span> <span class=p>=</span> <span class=s2>"myResourceGroup"</span>
</span><span id=__span-21-2><a href=#__codelineno-21-2 id=__codelineno-21-2 name=__codelineno-21-2></a><span class=nv>$location</span> <span class=p>=</span> <span class=s2>"eastus"</span>
</span><span id=__span-21-3><a href=#__codelineno-21-3 id=__codelineno-21-3 name=__codelineno-21-3></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=s2>"mystorageaccount"</span>
</span><span id=__span-21-4><a href=#__codelineno-21-4 id=__codelineno-21-4 name=__codelineno-21-4></a><span class=nv>$indexDocument</span> <span class=p>=</span> <span class=s2>"index.html"</span>
</span><span id=__span-21-5><a href=#__codelineno-21-5 id=__codelineno-21-5 name=__codelineno-21-5></a><span class=n>az</span> <span class=nb>group </span><span class=n>create</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-location</span> <span class=nv>$location</span>
</span><span id=__span-21-6><a href=#__codelineno-21-6 id=__codelineno-21-6 name=__codelineno-21-6></a><span class=n>az</span> <span class=n>storage</span> <span class=n>account</span> <span class=n>create</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$storageAccount</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-location</span> <span class=nv>$location</span> <span class=p>-</span><span class=n>-sku</span> <span class=n>Standard_LRS</span>
</span><span id=__span-21-7><a href=#__codelineno-21-7 id=__codelineno-21-7 name=__codelineno-21-7></a><span class=n>az</span> <span class=n>storage</span> <span class=n>blob</span> <span class=n>service-properties</span> <span class=n>update</span> <span class=p>-</span><span class=n>-account-name</span> <span class=nv>$storageAccount</span> <span class=p>-</span><span class=n>-static-website</span> <span class=p>-</span><span class=n>-index-document</span> <span class=nv>$indexDocument</span>
</span></code></pre></div> <h4 id=add-private-endpoints-to-the-storage-accoun-for-blob-and-static-website><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#add-private-endpoints-to-the-storage-accoun-for-blob-and-static-website>Add private endpoints to the storage accoun for blob and static website</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-22-1><a href=#__codelineno-22-1 id=__codelineno-22-1 name=__codelineno-22-1></a><span class=nv>$resourceGroup</span> <span class=p>=</span> <span class=s2>"myResourceGroup"</span>
</span><span id=__span-22-2><a href=#__codelineno-22-2 id=__codelineno-22-2 name=__codelineno-22-2></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=s2>"mystorageaccount"</span>
</span><span id=__span-22-3><a href=#__codelineno-22-3 id=__codelineno-22-3 name=__codelineno-22-3></a><span class=nv>$privateEndpointName</span> <span class=p>=</span> <span class=s2>"myprivatelink"</span>
</span><span id=__span-22-4><a href=#__codelineno-22-4 id=__codelineno-22-4 name=__codelineno-22-4></a><span class=nv>$location</span> <span class=p>=</span> <span class=s2>"eastus"</span>
</span><span id=__span-22-5><a href=#__codelineno-22-5 id=__codelineno-22-5 name=__codelineno-22-5></a><span class=nv>$vnetName</span> <span class=p>=</span> <span class=s2>"myVnet"</span>
</span><span id=__span-22-6><a href=#__codelineno-22-6 id=__codelineno-22-6 name=__codelineno-22-6></a><span class=nv>$subnetName</span> <span class=p>=</span> <span class=s2>"mySubnet"</span>
</span><span id=__span-22-7><a href=#__codelineno-22-7 id=__codelineno-22-7 name=__codelineno-22-7></a><span class=nv>$subscriptionId</span> <span class=p>=</span> <span class=s2>"{subscription-id}"</span>
</span><span id=__span-22-8><a href=#__codelineno-22-8 id=__codelineno-22-8 name=__codelineno-22-8></a><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>create</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$privateEndpointName</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-vnet-name</span> <span class=nv>$vnetName</span> <span class=p>-</span><span class=n>-subnet</span> <span class=nv>$subnetName</span> <span class=p>-</span><span class=n>-private-connection-resource-id</span> <span class=s2>"/subscriptions/$subscriptionId/resourceGroups/$resourceGroup/providers/Microsoft.Storage/storageAccounts/$storageAccount"</span> <span class=p>-</span><span class=n>-group-id</span> <span class=n>blob</span> <span class=p>-</span><span class=n>-connection-name</span> <span class=nv>$privateEndpointName</span> <span class=p>-</span><span class=n>-location</span> <span class=nv>$location</span>
</span><span id=__span-22-9><a href=#__codelineno-22-9 id=__codelineno-22-9 name=__codelineno-22-9></a><span class=n>az</span> <span class=n>network</span> <span class=n>private-endpoint</span> <span class=n>create</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$privateEndpointName</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-vnet-name</span> <span class=nv>$vnetName</span> <span class=p>-</span><span class=n>-subnet</span> <span class=nv>$subnetName</span> <span class=p>-</span><span class=n>-private-connection-resource-id</span> <span class=s2>"/subscriptions/$subscriptionId/resourceGroups/$resourceGroup/providers/Microsoft.Storage/storageAccounts/$storageAccount"</span> <span class=p>-</span><span class=n>-group-id</span> <span class=n>web</span> <span class=p>-</span><span class=n>-connection-name</span> <span class=nv>$privateEndpointName</span> <span class=p>-</span><span class=n>-location</span> <span class=nv>$location</span>
</span></code></pre></div> <h4 id=disable-public-access-to-the-storage-account-except-for-your-ip><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#disable-public-access-to-the-storage-account-except-for-your-ip>Disable public access to the storage account except for your ip</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-23-1><a href=#__codelineno-23-1 id=__codelineno-23-1 name=__codelineno-23-1></a><span class=nv>$resourceGroup</span> <span class=p>=</span> <span class=s2>"myResourceGroup"</span>
</span><span id=__span-23-2><a href=#__codelineno-23-2 id=__codelineno-23-2 name=__codelineno-23-2></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=s2>"mystorageaccount"</span>
</span><span id=__span-23-3><a href=#__codelineno-23-3 id=__codelineno-23-3 name=__codelineno-23-3></a><span class=nv>$ipAddress</span> <span class=p>=</span> <span class=s2>"myIpAddress"</span>
</span><span id=__span-23-4><a href=#__codelineno-23-4 id=__codelineno-23-4 name=__codelineno-23-4></a><span class=n>az</span> <span class=n>storage</span> <span class=n>account</span> <span class=n>update</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$storageAccount</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-bypass</span> <span class=s2>"AzureServices,Logging,Metrics"</span> <span class=p>-</span><span class=n>-default-action</span> <span class=n>Deny</span>
</span><span id=__span-23-5><a href=#__codelineno-23-5 id=__codelineno-23-5 name=__codelineno-23-5></a><span class=n>az</span> <span class=n>storage</span> <span class=n>account</span> <span class=n>network-rule</span> <span class=n>add</span> <span class=p>-</span><span class=n>-account-name</span> <span class=nv>$storageAccount</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-ip-address</span> <span class=nv>$ipAddress</span>
</span></code></pre></div> <h4 id=assign-the-storage-blob-data-contributor-role-to-the-managed-identity-of-the-azure-arc-enabled-server><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#assign-the-storage-blob-data-contributor-role-to-the-managed-identity-of-the-azure-arc-enabled-server>Assign the Storage Blob Data Contributor role to the managed identity of the Azure ARC-enabled server</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-24-1><a href=#__codelineno-24-1 id=__codelineno-24-1 name=__codelineno-24-1></a><span class=nv>$resourceGroup</span> <span class=p>=</span> <span class=s2>"myResourceGroup"</span>
</span><span id=__span-24-2><a href=#__codelineno-24-2 id=__codelineno-24-2 name=__codelineno-24-2></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=s2>"mystorageaccount"</span>
</span><span id=__span-24-3><a href=#__codelineno-24-3 id=__codelineno-24-3 name=__codelineno-24-3></a><span class=nv>$serverName</span> <span class=p>=</span> <span class=s2>"myserver"</span>
</span><span id=__span-24-4><a href=#__codelineno-24-4 id=__codelineno-24-4 name=__codelineno-24-4></a><span class=nv>$managedIdentity</span> <span class=p>=</span> <span class=n>az</span> <span class=n>resource</span> <span class=n>show</span> <span class=p>-</span><span class=n>-resource-group</span> <span class=nv>$resourceGroup</span> <span class=p>-</span><span class=n>-name</span> <span class=nv>$serverName</span> <span class=p>-</span><span class=n>-resource-type</span> <span class=s2>"Microsoft.HybridCompute/machines"</span> <span class=p>-</span><span class=n>-query</span> <span class=s2>"identity.principalId"</span> <span class=p>-</span><span class=n>-output</span> <span class=n>tsv</span>
</span><span id=__span-24-5><a href=#__codelineno-24-5 id=__codelineno-24-5 name=__codelineno-24-5></a><span class=n>az</span> <span class=n>role</span> <span class=n>assignment</span> <span class=n>create</span> <span class=p>-</span><span class=n>-role</span> <span class=s2>"Storage Blob Data Contributor"</span> <span class=p>-</span><span class=n>-assignee-object-id</span> <span class=nv>$managedIdentity</span> <span class=p>-</span><span class=n>-scope</span> <span class=s2>"/subscriptions/{subscription-id}/resourceGroups/$resourceGroup/providers/Microsoft.Storage/storageAccounts/$storageAccount"</span>
</span></code></pre></div> <h3 id=download-azcopy-install-it-and-copy-something-to-web-in-the-storage-account><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#download-azcopy-install-it-and-copy-something-to-web-in-the-storage-account>Download azcopy, install it and copy something to $web in the storage account</a></h3> <h4 id=download-azcopy-in-the-vm><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#download-azcopy-in-the-vm>Download azcopy in the vm</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-25-1><a href=#__codelineno-25-1 id=__codelineno-25-1 name=__codelineno-25-1></a><span class=nb>Invoke-WebRequest</span> <span class=n>-Uri</span> <span class=s2>"https://aka.ms/downloadazcopy-v10-windows"</span> <span class=n>-OutFile</span> <span class=n>AzCopy</span><span class=p>.</span><span class=n>zip</span>
</span><span id=__span-25-2><a href=#__codelineno-25-2 id=__codelineno-25-2 name=__codelineno-25-2></a>
</span><span id=__span-25-3><a href=#__codelineno-25-3 id=__codelineno-25-3 name=__codelineno-25-3></a><span class=nb>Expand-Archive</span> <span class=n>AzCopy</span><span class=p>.</span><span class=n>zip</span> <span class=n>-DestinationPath</span> <span class=nv>$env:ProgramFiles</span>
</span><span id=__span-25-4><a href=#__codelineno-25-4 id=__codelineno-25-4 name=__codelineno-25-4></a>
</span><span id=__span-25-5><a href=#__codelineno-25-5 id=__codelineno-25-5 name=__codelineno-25-5></a><span class=nv>$env:Path</span> <span class=p>+=</span> <span class=s2>";$env:ProgramFiles\azcopy"</span>
</span></code></pre></div> <h4 id=copy-something-to-web-in-the-storage-account><a class=toclink href=../../2024/04/07/how-to-use-azue-arc-enabled-servers-with-managed-identity-to-access-to-azure-storage-account/#copy-something-to-web-in-the-storage-account>Copy something to $web in the storage account</a></h4> <div class="language-powershell highlight"><pre><span></span><code><span id=__span-26-1><a href=#__codelineno-26-1 id=__codelineno-26-1 name=__codelineno-26-1></a><span class=nv>$storageAccount</span> <span class=p>=</span> <span class=s2>"mystorageaccount"</span>
</span><span id=__span-26-2><a href=#__codelineno-26-2 id=__codelineno-26-2 name=__codelineno-26-2></a><span class=nv>$source</span> <span class=p>=</span> <span class=s2>"C:\Users\Public\Documents\myFile.txt"</span>
</span><span id=__span-26-3><a href=#__codelineno-26-3 id=__codelineno-26-3 name=__codelineno-26-3></a><span class=nv>$destination</span> <span class=p>=</span> <span class=s2>"https://$storageAccount.blob.core.windows.net/\$web/myFile.txt"</span>
</span><span id=__span-26-4><a href=#__codelineno-26-4 id=__codelineno-26-4 name=__codelineno-26-4></a><span class=n>azcopy</span> <span class=n>login</span> <span class=p>-</span><span class=n>-identity</span>
</span><span id=__span-26-5><a href=#__codelineno-26-5 id=__codelineno-26-5 name=__codelineno-26-5></a><span class=n>azcopy</span> <span class=nb>copy </span><span class=nv>$source</span> <span class=nv>$destination</span>
</span></code></pre></div> <p>Now you can check the file in the static website of the storage account.</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-04-06 00:00:00">April 6, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 4 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=azure-arc><a href=../../2024/04/06/azure-arc/ class=toclink>Azure ARC</a></h2> <p>Azure ARC is a service that extends Azure management capabilities to any infrastructure. It allows you to manage resources running on-premises, at the edge, or in multi-cloud environments using the same Azure management tools, security, and compliance policies that you use in Azure. Azure ARC enables you to manage and govern your resources consistently across all environments, providing a unified control plane for your hybrid cloud infrastructure. Let's explore how Azure ARC works and how you can leverage it to manage your resources effectively.</p> <h3 id=azure-arc-overview><a class=toclink href=../../2024/04/06/azure-arc/#azure-arc-overview>Azure ARC Overview</a></h3> <p><strong>Azure ARC</strong> is a service that extends Azure management capabilities to any infrastructure. It allows you to manage resources running outside of Azure using the same Azure management tools, security, and compliance policies that you use in Azure. Azure ARC provides a unified control plane for managing resources across on-premises, multi-cloud, and edge environments, enabling you to govern your resources consistently.</p> <p>Azure ARC enables you to:</p> <ul> <li><strong>Manage resources</strong>: Azure ARC allows you to manage resources running on-premises, at the edge, or in multi-cloud environments using Azure management tools like Azure Policy, Azure Monitor, and Microsoft Defender for Cloud.</li> <li><strong>Governance</strong>: Azure ARC provides a unified control plane for managing and governing resources across all environments, enabling you to enforce security and compliance policies consistently.</li> <li><strong>Security</strong>: Azure ARC extends Azure security capabilities to resources running outside of Azure, enabling you to protect your resources with Azure security features like Azure Security Center and Azure Defender.</li> <li><strong>Compliance</strong>: Azure ARC enables you to enforce compliance policies across all environments, ensuring that your resources meet regulatory requirements and organizational standards.</li> </ul> <h3 id=azure-arc-components><a class=toclink href=../../2024/04/06/azure-arc/#azure-arc-components>Azure ARC Components</a></h3> <p>Azure ARC consists of the following components:</p> <ul> <li><strong>Azure ARC-enabled servers</strong>: Azure ARC-enabled servers allow you to manage and govern servers running on-premises or at the edge using Azure management tools. You can connect your servers to Azure ARC to manage them using Azure Policy, Azure Monitor, and Microsoft Defender for Cloud.</li> <li><strong>Azure ARC-enabled Kubernetes clusters</strong>: Azure ARC-enabled Kubernetes clusters allow you to manage and govern Kubernetes clusters running on-premises or in other clouds using Azure management tools. You can connect your Kubernetes clusters to Azure ARC to manage them using Azure Policy, Azure Monitor, and Microsoft Defender for Cloud.</li> <li><strong>Azure ARC-enabled data services</strong>: Azure ARC-enabled data services allow you to manage and govern data services running on-premises or in other clouds using Azure management tools. You can connect your data services to Azure ARC to manage them using Azure Policy, Azure Monitor, and Microsoft Defender for Cloud.</li> <li><strong>SQL Server enabled by Azure Arc</strong>: SQL Server enabled by Azure Arc allows you to run SQL Server on any infrastructure using Azure management tools. You can connect your SQL Server instances to Azure ARC to manage them using Azure Policy, Azure Monitor, and Microsoft Defender for Cloud.</li> <li><strong>Azure Arc-enabled private clouds</strong>: Azure Arc resource bridge hosts other components such as custom locations, cluster extensions, and other Azure Arc agents in order to deliver the level of functionality with the private cloud infrastructures it supports.</li> </ul> <h3 id=azure-arc-use-cases><a class=toclink href=../../2024/04/06/azure-arc/#azure-arc-use-cases>Azure ARC Use Cases</a></h3> <p>Azure ARC can be used in a variety of scenarios to manage and govern resources across on-premises, multi-cloud, and edge environments. Some common use cases for Azure ARC include:</p> <ul> <li><strong>Hybrid cloud management</strong>: Azure ARC enables you to manage resources consistently across on-premises, multi-cloud, and edge environments using the same Azure management tools and policies.</li> <li><strong>Security and compliance</strong>: Azure ARC allows you to enforce security and compliance policies consistently across all environments, ensuring that your resources meet regulatory requirements and organizational standards.</li> <li><strong>Resource governance</strong>: Azure ARC provides a unified control plane for managing and governing resources across all environments, enabling you to enforce policies and monitor resource health and performance.</li> <li><strong>Application modernization</strong>: Azure ARC enables you to manage and govern Kubernetes clusters and data services running on-premises or in other clouds, allowing you to modernize your applications and infrastructure.</li> </ul> <h3 id=getting-started-with-azure-arc><a class=toclink href=../../2024/04/06/azure-arc/#getting-started-with-azure-arc>Getting Started with Azure ARC</a></h3> <p>To get started with Azure ARC, you need to:</p> <ol> <li><strong>Connect your resources</strong>: Connect your servers, Kubernetes clusters, or data services to Azure ARC using the Azure ARC agent.</li> <li><strong>Manage your resources</strong>: Use Azure management tools like Azure Policy, Azure Monitor, and Microsoft Defender for Cloud to manage and govern your resources consistently across all environments.</li> <li><strong>Enforce security and compliance</strong>: Use Azure security features like Microsoft Defender for Cloud to protect your resources and enforce security and compliance policies.</li> </ol> <p>By leveraging Azure ARC, you can manage and govern your resources consistently across on-premises, multi-cloud, and edge environments, providing a unified control plane for your hybrid cloud infrastructure. Azure ARC enables you to enforce security and compliance policies consistently, ensuring that your resources meet regulatory requirements and organizational standards. </p> <h3 id=conclusion><a class=toclink href=../../2024/04/06/azure-arc/#conclusion>Conclusion</a></h3> <p>Azure ARC is a powerful service that extends Azure management capabilities to any infrastructure, enabling you to manage and govern resources consistently across on-premises, multi-cloud, and edge environments. By leveraging Azure ARC, you can enforce security and compliance policies consistently, ensuring that your resources meet regulatory requirements and organizational standards. Azure ARC provides a unified control plane for managing and governing resources, enabling you to manage your hybrid cloud infrastructure effectively.</p> <p>For more information on Azure ARC, visit the <a href=https://docs.microsoft.com/en-us/azure/azure-arc/ >Azure ARC documentation</a>.</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-03-02 00:00:00">March 2, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 2 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=azure-policy-management-best-practices><a href=../../2024/03/02/azure-policy-management-best-practices/ class=toclink>Azure Policy Management Best Practices</a></h2> <ol> <li> <p><strong>Version Control</strong>: Store your policy definitions in a version-controlled repository. This practice ensures that you can track changes, collaborate effectively, and roll back to previous versions if needed.</p> </li> <li> <p><strong>Automated Testing</strong>: Incorporate policy testing into your CI/CD pipelines. Automated tests can help you catch policy violations early in the development process, reducing the risk of non-compliance.</p> </li> <li> <p><strong>Policy Documentation</strong>: Document your policies clearly, including their purpose, scope, and expected behavior. This documentation helps stakeholders understand the policies and their impact on Azure resources.</p> </li> <li> <p><strong>Policy Assignment</strong>: Assign policies at the appropriate scope (e.g., Management Group, Subscription, Resource Group) based on your organizational requirements. Avoid assigning policies at a broader scope than necessary to prevent unintended consequences.</p> </li> <li> <p><strong>Policy Exemptions</strong>: Use policy exemptions judiciously. Document the reasons for exemptions and periodically review them to ensure they are still valid.</p> </li> <li> <p><strong>Policy Enforcement</strong>: Monitor policy compliance regularly and take corrective action for non-compliant resources. Use Azure Policy's built-in compliance reports and alerts to track policy violations.</p> </li> <li> <p><strong>Policy Remediation</strong>: Implement automated remediation tasks for policy violations where possible. Azure Policy's remediation tasks can help bring non-compliant resources back into compliance automatically.</p> </li> <li> <p><strong>Policy Monitoring</strong>: Continuously monitor policy effectiveness and adjust policies as needed. Regularly review policy violations, exemptions, and compliance trends to refine your policy implementation.</p> </li> <li> <p><strong>Policy Governance</strong>: Establish a governance framework for Azure Policy that includes policy creation, assignment, monitoring, and enforcement processes. Define roles and responsibilities for policy management to ensure accountability.</p> </li> <li> <p><strong>Policy Lifecycle Management</strong>: Define a policy lifecycle management process that covers policy creation, testing, deployment, monitoring, and retirement. Regularly review and update policies to align with changing organizational requirements.</p> </li> <li> <p><strong>Unique source of truth</strong>: Use EPAC, terraform, ARM,.... but use an unique source of truth for your policies.</p> </li> </ol> <p>By following these best practices, you can effectively manage Azure policies and ensure compliance with organizational standards across your Azure environment. Azure Policy plays a crucial role in maintaining governance, security, and compliance, and adopting these practices can help you maximize its benefits.</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-02-26 00:00:00">February 26, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 3 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=writing-your-first-policy-in-azure-with-portal><a href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/ class=toclink>Writing Your First Policy in Azure with Portal</a></h2> <p>Azure Policy is a service in Azure that you use to create, assign and manage policies. These policies enforce different rules and effects over your resources, so those resources stay compliant with your corporate standards and service level agreements.</p> <p>In this post, we'll walk through the steps of creating your first policy in Azure.</p> <h3 id=prerequisites><a class=toclink href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/#prerequisites>Prerequisites</a></h3> <ol> <li>An active Azure subscription.</li> <li>Access to Azure portal.</li> </ol> <h3 id=step-1-open-azure-policy><a class=toclink href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/#step-1-open-azure-policy>Step 1: Open Azure Policy</a></h3> <ul> <li>Login to the <a href=https://portal.azure.com/ >Azure Portal</a>.</li> <li>In the left-hand menu, click on <code>All services</code>.</li> <li>In the <code>All services</code> blade, search for <code>Policy</code>.</li> </ul> <h3 id=step-2-create-a-new-policy-definition><a class=toclink href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/#step-2-create-a-new-policy-definition>Step 2: Create a New Policy Definition</a></h3> <ul> <li>Click on <code>Definitions</code> under the <code>Authoring</code> section.</li> <li>Click on <code>+ Policy definition</code>.</li> </ul> <h3 id=step-3-fill-out-the-policy-definition><a class=toclink href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/#step-3-fill-out-the-policy-definition>Step 3: Fill Out the Policy Definition</a></h3> <p>You will need to fill out several fields:</p> <ul> <li><strong>Definition location</strong>: The location where the policy is stored.</li> <li><strong>Name</strong>: This is a unique name for your policy.</li> <li><strong>Description</strong>: A detailed description of what the policy does.</li> <li><strong>Category</strong>: You can categorize your policy for easier searching and filtering.</li> </ul> <p>The most important part of the policy definition is the policy rule itself. The policy rule is where you describe the logic that enforces the policy. </p> <p>Here's an example of a simple policy rule that ensures all indexed resources have tags and deny creation or update if they do not.</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=p>{</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w>    </span><span class=nt>"properties"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>        </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Require a tag and its value"</span><span class=p>,</span>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>        </span><span class=nt>"policyType"</span><span class=p>:</span><span class=w> </span><span class=s2>"Custom"</span><span class=p>,</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>        </span><span class=nt>"mode"</span><span class=p>:</span><span class=w> </span><span class=s2>"Indexed"</span><span class=p>,</span>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"This policy requires a specific tag and its value."</span><span class=p>,</span>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=w>        </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a><span class=w>            </span><span class=nt>"category"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tags"</span>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w>        </span><span class=nt>"parameters"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>            </span><span class=nt>"tagName"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-12><a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-2-13><a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-14><a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Name"</span><span class=p>,</span>
</span><span id=__span-2-15><a href=#__codelineno-2-15 id=__codelineno-2-15 name=__codelineno-2-15></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Name of the tag, such as 'environment'"</span>
</span><span id=__span-2-16><a href=#__codelineno-2-16 id=__codelineno-2-16 name=__codelineno-2-16></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-2-17><a href=#__codelineno-2-17 id=__codelineno-2-17 name=__codelineno-2-17></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-2-18><a href=#__codelineno-2-18 id=__codelineno-2-18 name=__codelineno-2-18></a><span class=w>            </span><span class=nt>"tagValue"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-19><a href=#__codelineno-2-19 id=__codelineno-2-19 name=__codelineno-2-19></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-2-20><a href=#__codelineno-2-20 id=__codelineno-2-20 name=__codelineno-2-20></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-21><a href=#__codelineno-2-21 id=__codelineno-2-21 name=__codelineno-2-21></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Value"</span><span class=p>,</span>
</span><span id=__span-2-22><a href=#__codelineno-2-22 id=__codelineno-2-22 name=__codelineno-2-22></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Value of the tag, such as 'production'"</span>
</span><span id=__span-2-23><a href=#__codelineno-2-23 id=__codelineno-2-23 name=__codelineno-2-23></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-2-24><a href=#__codelineno-2-24 id=__codelineno-2-24 name=__codelineno-2-24></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-2-25><a href=#__codelineno-2-25 id=__codelineno-2-25 name=__codelineno-2-25></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-26><a href=#__codelineno-2-26 id=__codelineno-2-26 name=__codelineno-2-26></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-27><a href=#__codelineno-2-27 id=__codelineno-2-27 name=__codelineno-2-27></a><span class=w>        </span><span class=nt>"policyRule"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-28><a href=#__codelineno-2-28 id=__codelineno-2-28 name=__codelineno-2-28></a><span class=w>            </span><span class=nt>"if"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-29><a href=#__codelineno-2-29 id=__codelineno-2-29 name=__codelineno-2-29></a><span class=w>                </span><span class=nt>"not"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-30><a href=#__codelineno-2-30 id=__codelineno-2-30 name=__codelineno-2-30></a><span class=w>                    </span><span class=nt>"field"</span><span class=p>:</span><span class=w> </span><span class=s2>"[concat('tags[', parameters('tagName'), ']')]"</span><span class=p>,</span>
</span><span id=__span-2-31><a href=#__codelineno-2-31 id=__codelineno-2-31 name=__codelineno-2-31></a><span class=w>                    </span><span class=nt>"equals"</span><span class=p>:</span><span class=w> </span><span class=s2>"[parameters('tagValue')]"</span>
</span><span id=__span-2-32><a href=#__codelineno-2-32 id=__codelineno-2-32 name=__codelineno-2-32></a><span class=w>                    </span><span class=p>}</span>
</span><span id=__span-2-33><a href=#__codelineno-2-33 id=__codelineno-2-33 name=__codelineno-2-33></a><span class=w>                </span><span class=p>},</span>
</span><span id=__span-2-34><a href=#__codelineno-2-34 id=__codelineno-2-34 name=__codelineno-2-34></a><span class=w>            </span><span class=nt>"then"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-35><a href=#__codelineno-2-35 id=__codelineno-2-35 name=__codelineno-2-35></a><span class=w>                </span><span class=nt>"effect"</span><span class=p>:</span><span class=w> </span><span class=s2>"deny"</span>
</span><span id=__span-2-36><a href=#__codelineno-2-36 id=__codelineno-2-36 name=__codelineno-2-36></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-2-37><a href=#__codelineno-2-37 id=__codelineno-2-37 name=__codelineno-2-37></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-2-38><a href=#__codelineno-2-38 id=__codelineno-2-38 name=__codelineno-2-38></a><span class=w>    </span><span class=p>}</span>
</span></code></pre></div> <p>But, in portal, you can add properties directly in the form but you can't add displayName, policyType and metadata because they are added by portal itself, so you can add only mode,parameters and policyRule, Policy definition could be like this:</p> <ul> <li>Definition location: <code>Tenant Root Group</code></li> <li>Name: <code>Require a tag and its value</code></li> <li>Description: <code>This policy requires a specific tag and its value.</code></li> <li>Category: <code>Tags</code></li> <li>POLICY RULE:</li> </ul> <div class="language-json highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=p>{</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w>        </span><span class=nt>"mode"</span><span class=p>:</span><span class=w> </span><span class=s2>"Indexed"</span><span class=p>,</span><span class=w> </span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>        </span><span class=nt>"parameters"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=w>            </span><span class=nt>"tagName"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Name"</span><span class=p>,</span>
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Name of the tag, such as 'environment'"</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=w>            </span><span class=nt>"tagValue"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-3-14><a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-15><a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Value"</span><span class=p>,</span>
</span><span id=__span-3-16><a href=#__codelineno-3-16 id=__codelineno-3-16 name=__codelineno-3-16></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Value of the tag, such as 'production'"</span>
</span><span id=__span-3-17><a href=#__codelineno-3-17 id=__codelineno-3-17 name=__codelineno-3-17></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-3-18><a href=#__codelineno-3-18 id=__codelineno-3-18 name=__codelineno-3-18></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-3-19><a href=#__codelineno-3-19 id=__codelineno-3-19 name=__codelineno-3-19></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-3-20><a href=#__codelineno-3-20 id=__codelineno-3-20 name=__codelineno-3-20></a><span class=w>        </span><span class=nt>"policyRule"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-21><a href=#__codelineno-3-21 id=__codelineno-3-21 name=__codelineno-3-21></a><span class=w>            </span><span class=nt>"if"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-22><a href=#__codelineno-3-22 id=__codelineno-3-22 name=__codelineno-3-22></a><span class=w>                </span><span class=nt>"not"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-23><a href=#__codelineno-3-23 id=__codelineno-3-23 name=__codelineno-3-23></a><span class=w>                    </span><span class=nt>"field"</span><span class=p>:</span><span class=w> </span><span class=s2>"[concat('tags[', parameters('tagName'), ']')]"</span><span class=p>,</span>
</span><span id=__span-3-24><a href=#__codelineno-3-24 id=__codelineno-3-24 name=__codelineno-3-24></a><span class=w>                    </span><span class=nt>"equals"</span><span class=p>:</span><span class=w> </span><span class=s2>"[parameters('tagValue')]"</span>
</span><span id=__span-3-25><a href=#__codelineno-3-25 id=__codelineno-3-25 name=__codelineno-3-25></a><span class=w>                    </span><span class=p>}</span>
</span><span id=__span-3-26><a href=#__codelineno-3-26 id=__codelineno-3-26 name=__codelineno-3-26></a><span class=w>                </span><span class=p>},</span>
</span><span id=__span-3-27><a href=#__codelineno-3-27 id=__codelineno-3-27 name=__codelineno-3-27></a><span class=w>            </span><span class=nt>"then"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-28><a href=#__codelineno-3-28 id=__codelineno-3-28 name=__codelineno-3-28></a><span class=w>                </span><span class=nt>"effect"</span><span class=p>:</span><span class=w> </span><span class=s2>"deny"</span>
</span><span id=__span-3-29><a href=#__codelineno-3-29 id=__codelineno-3-29 name=__codelineno-3-29></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-3-30><a href=#__codelineno-3-30 id=__codelineno-3-30 name=__codelineno-3-30></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-3-31><a href=#__codelineno-3-31 id=__codelineno-3-31 name=__codelineno-3-31></a><span class=p>}</span>
</span></code></pre></div> <p>Once you've filled out all the fields and written your policy rule, click on <code>Save</code>.</p> <h3 id=step-4-assign-the-policy><a class=toclink href=../../2024/02/26/writing-your-first-policy-in-azure-with-portal/#step-4-assign-the-policy>Step 4: Assign the Policy</a></h3> <ul> <li>Go back to the <code>Policy</code> service in the Azure portal.</li> <li>Click on <code>Assignments</code> under the <code>Authoring</code> section.</li> <li>Click on <code>+ Assign Policy</code>.</li> <li>In <strong>Basics</strong>, fill out the following fields:<ul> <li><strong>Scope</strong><ul> <li><strong>Scope</strong>: Select the scope where you want to assign the policy.</li> <li><strong>Exclusions</strong>: Add any exclusions if needed.</li> </ul> </li> <li><strong>Basics</strong><ul> <li><strong>Policy definition</strong>: Select the policy you created.</li> <li><strong>Assignment name</strong>: A unique name for the assignment.</li> <li><strong>Description</strong>: A detailed description of the assignment.</li> <li><strong>Policy enforcement</strong>: <code>Enabled</code>.</li> </ul> </li> </ul> </li> <li>In <strong>Parameters</strong>: Fill out any parameters needed for the policy.</li> <li>In <strong>Non-compliance message</strong>: A message to display when a resource is non-compliant.</li> <li>Click on <code>Review + create</code>: Review the assignment and click on <code>Create</code>.</li> </ul> <p>Congratulations! You've just created and assigned your first policy in Azure. It will now evaluate any new or existing resources within its scope.</p> <p>Remember, Azure Policy is a powerful tool for maintaining compliance and managing your resources at scale. Happy coding!</p> </div> </article> <article class="md-post md-post--excerpt"> <header class=md-post__header> <nav class="md-post__authors md-typeset"> <span class=md-author> <img alt="Rafael FernÃ¡ndez" src=https://avatars.githubusercontent.com/u/39990341> </span> </nav> <div class="md-post__meta md-meta"> <ul class=md-meta__list> <li class=md-meta__item> <time datetime="2024-02-25 00:00:00">February 25, 2024</time></li> <li class=md-meta__item> in <a href=./ class=md-meta__link>Azure Services</a></li> <li class=md-meta__item> 2 min read </li> </ul> </div> </header> <div class="md-post__content md-typeset"> <h2 id=azure-policy-defintion-schema><a href=../../2024/02/25/azure-policy-defintion-schema/ class=toclink>Azure Policy, defintion schema</a></h2> <p>This is the schema for the Azure Policy definition:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a><span class=p>{</span>
</span><span id=__span-2-2><a href=#__codelineno-2-2 id=__codelineno-2-2 name=__codelineno-2-2></a><span class=w>    </span><span class=nt>"properties"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-3><a href=#__codelineno-2-3 id=__codelineno-2-3 name=__codelineno-2-3></a><span class=w>        </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-4><a href=#__codelineno-2-4 id=__codelineno-2-4 name=__codelineno-2-4></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-2-5><a href=#__codelineno-2-5 id=__codelineno-2-5 name=__codelineno-2-5></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The display name of the policy definition."</span>
</span><span id=__span-2-6><a href=#__codelineno-2-6 id=__codelineno-2-6 name=__codelineno-2-6></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-7><a href=#__codelineno-2-7 id=__codelineno-2-7 name=__codelineno-2-7></a><span class=w>        </span><span class=nt>"policyType"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-8><a href=#__codelineno-2-8 id=__codelineno-2-8 name=__codelineno-2-8></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-2-9><a href=#__codelineno-2-9 id=__codelineno-2-9 name=__codelineno-2-9></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The policy type of the policy definition."</span>
</span><span id=__span-2-10><a href=#__codelineno-2-10 id=__codelineno-2-10 name=__codelineno-2-10></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-11><a href=#__codelineno-2-11 id=__codelineno-2-11 name=__codelineno-2-11></a><span class=w>        </span><span class=nt>"mode"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-12><a href=#__codelineno-2-12 id=__codelineno-2-12 name=__codelineno-2-12></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-2-13><a href=#__codelineno-2-13 id=__codelineno-2-13 name=__codelineno-2-13></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The mode of the policy definition."</span>
</span><span id=__span-2-14><a href=#__codelineno-2-14 id=__codelineno-2-14 name=__codelineno-2-14></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-15><a href=#__codelineno-2-15 id=__codelineno-2-15 name=__codelineno-2-15></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-16><a href=#__codelineno-2-16 id=__codelineno-2-16 name=__codelineno-2-16></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-2-17><a href=#__codelineno-2-17 id=__codelineno-2-17 name=__codelineno-2-17></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The description of the policy definition."</span>
</span><span id=__span-2-18><a href=#__codelineno-2-18 id=__codelineno-2-18 name=__codelineno-2-18></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-19><a href=#__codelineno-2-19 id=__codelineno-2-19 name=__codelineno-2-19></a><span class=w>        </span><span class=nt>"mode"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-20><a href=#__codelineno-2-20 id=__codelineno-2-20 name=__codelineno-2-20></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"string"</span><span class=p>,</span>
</span><span id=__span-2-21><a href=#__codelineno-2-21 id=__codelineno-2-21 name=__codelineno-2-21></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The mode of the policy definition."</span>
</span><span id=__span-2-22><a href=#__codelineno-2-22 id=__codelineno-2-22 name=__codelineno-2-22></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-23><a href=#__codelineno-2-23 id=__codelineno-2-23 name=__codelineno-2-23></a><span class=w>        </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-24><a href=#__codelineno-2-24 id=__codelineno-2-24 name=__codelineno-2-24></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"object"</span><span class=p>,</span>
</span><span id=__span-2-25><a href=#__codelineno-2-25 id=__codelineno-2-25 name=__codelineno-2-25></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The metadata of the policy definition."</span>
</span><span id=__span-2-26><a href=#__codelineno-2-26 id=__codelineno-2-26 name=__codelineno-2-26></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-27><a href=#__codelineno-2-27 id=__codelineno-2-27 name=__codelineno-2-27></a><span class=w>        </span><span class=nt>"parameters"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-28><a href=#__codelineno-2-28 id=__codelineno-2-28 name=__codelineno-2-28></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"object"</span><span class=p>,</span>
</span><span id=__span-2-29><a href=#__codelineno-2-29 id=__codelineno-2-29 name=__codelineno-2-29></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The parameters of the policy definition."</span>
</span><span id=__span-2-30><a href=#__codelineno-2-30 id=__codelineno-2-30 name=__codelineno-2-30></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-2-31><a href=#__codelineno-2-31 id=__codelineno-2-31 name=__codelineno-2-31></a><span class=w>        </span><span class=nt>"policyRule"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-32><a href=#__codelineno-2-32 id=__codelineno-2-32 name=__codelineno-2-32></a><span class=w>            </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"object"</span><span class=p>,</span>
</span><span id=__span-2-33><a href=#__codelineno-2-33 id=__codelineno-2-33 name=__codelineno-2-33></a><span class=w>            </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"The policy rule of the policy definition. If/then rule."</span>
</span><span id=__span-2-34><a href=#__codelineno-2-34 id=__codelineno-2-34 name=__codelineno-2-34></a><span class=w>        </span><span class=p>}</span><span class=w>       </span>
</span><span id=__span-2-35><a href=#__codelineno-2-35 id=__codelineno-2-35 name=__codelineno-2-35></a>
</span><span id=__span-2-36><a href=#__codelineno-2-36 id=__codelineno-2-36 name=__codelineno-2-36></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-2-37><a href=#__codelineno-2-37 id=__codelineno-2-37 name=__codelineno-2-37></a><span class=p>}</span>
</span></code></pre></div> <p>You can see other elements in the schema like id, type, and name, It's depens of how you want to deploy the policy definition.</p> <p>Full schema is in <a href=https://schema.management.azure.com/schemas/2020-10-01/policyDefinition.json>Azure Policy definition schema</a>.</p> <h3 id=example><a class=toclink href=../../2024/02/25/azure-policy-defintion-schema/#example>Example</a></h3> <p>Here is an example of a policy definition:</p> <div class="language-json highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a><span class=p>{</span>
</span><span id=__span-3-2><a href=#__codelineno-3-2 id=__codelineno-3-2 name=__codelineno-3-2></a><span class=w>    </span><span class=nt>"properties"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-3><a href=#__codelineno-3-3 id=__codelineno-3-3 name=__codelineno-3-3></a><span class=w>        </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Require a tag and its value"</span><span class=p>,</span>
</span><span id=__span-3-4><a href=#__codelineno-3-4 id=__codelineno-3-4 name=__codelineno-3-4></a><span class=w>        </span><span class=nt>"policyType"</span><span class=p>:</span><span class=w> </span><span class=s2>"Custom"</span><span class=p>,</span>
</span><span id=__span-3-5><a href=#__codelineno-3-5 id=__codelineno-3-5 name=__codelineno-3-5></a><span class=w>        </span><span class=nt>"mode"</span><span class=p>:</span><span class=w> </span><span class=s2>"Indexed"</span><span class=p>,</span>
</span><span id=__span-3-6><a href=#__codelineno-3-6 id=__codelineno-3-6 name=__codelineno-3-6></a><span class=w>        </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"This policy requires a specific tag and its value."</span><span class=p>,</span>
</span><span id=__span-3-7><a href=#__codelineno-3-7 id=__codelineno-3-7 name=__codelineno-3-7></a><span class=w>        </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-8><a href=#__codelineno-3-8 id=__codelineno-3-8 name=__codelineno-3-8></a><span class=w>            </span><span class=nt>"category"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tags"</span>
</span><span id=__span-3-9><a href=#__codelineno-3-9 id=__codelineno-3-9 name=__codelineno-3-9></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-3-10><a href=#__codelineno-3-10 id=__codelineno-3-10 name=__codelineno-3-10></a><span class=w>        </span><span class=nt>"parameters"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-11><a href=#__codelineno-3-11 id=__codelineno-3-11 name=__codelineno-3-11></a><span class=w>            </span><span class=nt>"tagName"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-12><a href=#__codelineno-3-12 id=__codelineno-3-12 name=__codelineno-3-12></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-3-13><a href=#__codelineno-3-13 id=__codelineno-3-13 name=__codelineno-3-13></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-14><a href=#__codelineno-3-14 id=__codelineno-3-14 name=__codelineno-3-14></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Name"</span><span class=p>,</span>
</span><span id=__span-3-15><a href=#__codelineno-3-15 id=__codelineno-3-15 name=__codelineno-3-15></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Name of the tag, such as 'environment'"</span>
</span><span id=__span-3-16><a href=#__codelineno-3-16 id=__codelineno-3-16 name=__codelineno-3-16></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-3-17><a href=#__codelineno-3-17 id=__codelineno-3-17 name=__codelineno-3-17></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-3-18><a href=#__codelineno-3-18 id=__codelineno-3-18 name=__codelineno-3-18></a><span class=w>            </span><span class=nt>"tagValue"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-19><a href=#__codelineno-3-19 id=__codelineno-3-19 name=__codelineno-3-19></a><span class=w>                </span><span class=nt>"type"</span><span class=p>:</span><span class=w> </span><span class=s2>"String"</span><span class=p>,</span>
</span><span id=__span-3-20><a href=#__codelineno-3-20 id=__codelineno-3-20 name=__codelineno-3-20></a><span class=w>                </span><span class=nt>"metadata"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-21><a href=#__codelineno-3-21 id=__codelineno-3-21 name=__codelineno-3-21></a><span class=w>                    </span><span class=nt>"displayName"</span><span class=p>:</span><span class=w> </span><span class=s2>"Tag Value"</span><span class=p>,</span>
</span><span id=__span-3-22><a href=#__codelineno-3-22 id=__codelineno-3-22 name=__codelineno-3-22></a><span class=w>                    </span><span class=nt>"description"</span><span class=p>:</span><span class=w> </span><span class=s2>"Value of the tag, such as 'production'"</span>
</span><span id=__span-3-23><a href=#__codelineno-3-23 id=__codelineno-3-23 name=__codelineno-3-23></a><span class=w>                </span><span class=p>}</span>
</span><span id=__span-3-24><a href=#__codelineno-3-24 id=__codelineno-3-24 name=__codelineno-3-24></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-3-25><a href=#__codelineno-3-25 id=__codelineno-3-25 name=__codelineno-3-25></a><span class=w>        </span><span class=p>},</span>
</span><span id=__span-3-26><a href=#__codelineno-3-26 id=__codelineno-3-26 name=__codelineno-3-26></a><span class=w>        </span><span class=nt>"policyRule"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-27><a href=#__codelineno-3-27 id=__codelineno-3-27 name=__codelineno-3-27></a><span class=w>            </span><span class=nt>"if"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-28><a href=#__codelineno-3-28 id=__codelineno-3-28 name=__codelineno-3-28></a><span class=w>                </span><span class=nt>"field"</span><span class=p>:</span><span class=w> </span><span class=s2>"[concat('tags[', parameters('tagName'), ']')]"</span><span class=p>,</span>
</span><span id=__span-3-29><a href=#__codelineno-3-29 id=__codelineno-3-29 name=__codelineno-3-29></a><span class=w>                </span><span class=nt>"exists"</span><span class=p>:</span><span class=w> </span><span class=s2>"false"</span>
</span><span id=__span-3-30><a href=#__codelineno-3-30 id=__codelineno-3-30 name=__codelineno-3-30></a><span class=w>            </span><span class=p>},</span>
</span><span id=__span-3-31><a href=#__codelineno-3-31 id=__codelineno-3-31 name=__codelineno-3-31></a><span class=w>            </span><span class=nt>"then"</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-32><a href=#__codelineno-3-32 id=__codelineno-3-32 name=__codelineno-3-32></a><span class=w>                </span><span class=nt>"effect"</span><span class=p>:</span><span class=w> </span><span class=s2>"deny"</span>
</span><span id=__span-3-33><a href=#__codelineno-3-33 id=__codelineno-3-33 name=__codelineno-3-33></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-3-34><a href=#__codelineno-3-34 id=__codelineno-3-34 name=__codelineno-3-34></a><span class=w>        </span><span class=p>}</span>
</span><span id=__span-3-35><a href=#__codelineno-3-35 id=__codelineno-3-35 name=__codelineno-3-35></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-36><a href=#__codelineno-3-36 id=__codelineno-3-36 name=__codelineno-3-36></a><span class=p>}</span>
</span></code></pre></div> <p>This policy definition requires a specific tag and its value. If the tag does not exist, the policy denies the action.</p> <p>How you can see, the most important part of the policy definition is the policy rule. </p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>The policy rule is where you describe the logic that enforces the policy.</p> </div> <h3 id=conclusion><a class=toclink href=../../2024/02/25/azure-policy-defintion-schema/#conclusion>Conclusion</a></h3> <p>Understanding the schema for Azure Policy definitions is essential for creating and managing policies effectively. By defining the necessary attributes and rules, you can enforce compliance, security, and operational standards across your Azure environment. Leveraging the Azure Policy definition schema allows you to tailor policies to your organization's specific requirements and ensure consistent governance practices.</p> <h3 id=references><a class=toclink href=../../2024/02/25/azure-policy-defintion-schema/#references>References</a></h3> <ul> <li><a href=https://schema.management.azure.com/schemas/2020-10-01/policyDefinition.json>Azure Policy definition schema</a></li> <li><a href=https://learn.microsoft.com/en-us/azure/governance/policy/overview>Azure Policy</a></li> </ul> </div> </article> <nav class=md-pagination> <span class=md-pagination__current>1</span> <a href=page/2/ class=md-pagination__link>2</a> </nav> </div> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button class="md-top md-icon" data-md-component=top hidden type=button> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"></path></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright Â© 2023-now Rafael FernÃ¡ndez </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ rel=noopener target=_blank> Material for MkDocs </a> </div> <div class=md-social> <a class=md-social__link href=https://www.linkedin.com/in/rafaelfernandezd/ rel=noopener target=_blank title=LinkedIn> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"></path></svg> </a> <a class=md-social__link href=https://github.com/rfernandezdo rel=noopener target=_blank title=GitHub> <svg viewbox="0 0 496 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg> </a> <a class=md-social__link href=https://rfernandezdo.github.io/feed_rss_created.xml rel=noopener target=_blank title="RSS feed"> <svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h320c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm32 104c0-13.3 10.7-24 24-24 137 0 248 111 248 248 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24 83.9 0 152 68.1 152 152 0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104-13.3 0-24-10.7-24-24zm0 120a32 32 0 1 1 64 0 32 32 0 1 1-64 0z"></path></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.expand", "navigation.sections", "navigation.top", "navigation.tracking", "toc.integrate", "toc.nested", "toc.smoothscroll", "footer", "content.code.copy", "content.code.select", "content.code.annotate", "content.tooltips"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.1e8ae164.min.js></script> <script src=https://unpkg.com/tablesort@5.3.0/dist/tablesort.min.js></script> <script src=../../../javascripts/tablesort.js></script> <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body> </html>